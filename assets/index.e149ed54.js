import"./vue.37fee242.js";import{a2 as N,n as pe,y as Yt,u as Mt,H as l,b3 as Ie,ae as E,o as g,a4 as x,a5 as p,r as De,K as Q,x as O,aG as Gn,A as xe,b4 as Ne,ac as d,as as cn,U as K,aC as Tt,av as Ve,aJ as Ft,F as ne,c as A,w as V,b9 as Kt,bs as Ri,au as Be,bu as _t,T as Zt,Y as Bi,ab as C,l as qi,bv as An,aN as ce,a3 as P,O as U,aP as ee,M as W,aK as qe,aI as Le,D as Ze,bn as Li,br as Hn,aM as kt,ap as jt,L as ji,ay as zi,C as En,be as Ui}from"./@vue.7184beb0.js";import{i as Gi}from"./is-plain-object.906d88e8.js";import{c as Wn}from"./nanoevents.1080beb7.js";import{L as Ye}from"./lz-string.f2f3b7cf.js";import{_ as q,C as Hi}from"./@ivanv.350aa563.js";import{Y as Wi}from"./vue-next-select.e991724e.js";import{D as Yi}from"./vuedraggable.d1ae43bb.js";import{p as Ki}from"./vue-textarea-autosize.35804eaf.js";import{s as Zi,u as fn}from"./vue-toastification.80a5fcd9.js";import{A as Ji,u as Xi,E as Vn}from"./@pixi.c5050cb0.js";import{v as Qi,n as er}from"./workbox-window.60401ce8.js";import"./earcut.17d42416.js";import"./sortablejs.bd686609.js";import"./ismobilejs.5c6954b9.js";import"./eventemitter3.dc5195d7.js";import"./url.b1bd21f4.js";import"./querystring.776b9ab3.js";const tr=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}};tr();const nr="modulepreload",Fn={},ir="./",zt=function(t,n){return!n||n.length===0?t():Promise.all(n.map(i=>{if(i=`${ir}${i}`,i in Fn)return;Fn[i]=!0;const r=i.endsWith(".css"),a=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${a}`))return;const o=document.createElement("link");if(o.rel=r?"stylesheet":nr,r||(o.as="script",o.crossOrigin=""),o.href=i,document.head.appendChild(o),r)return new Promise((s,u)=>{o.addEventListener("load",s),o.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())},rr="Profectus Demo",ar="A demo project made in Profectus",or="profectus-demo",sr="",lr="",ur="",dr="0.0",cr="Initial Commit",fr=!0,pr=!1,mr=2,gr=!0,vr=null,hr="Logo.png",br=["main","c"],yr=3600,_r=1,kr=!0,wr="base64";var J={title:rr,description:ar,id:or,author:sr,discordName:lr,discordLink:ur,versionNumber:dr,versionTitle:cr,allowGoBack:fr,defaultShowSmall:pr,defaultDecimalsShown:mr,useHeader:gr,banner:vr,logo:hr,initialTabs:br,maxTickLength:yr,offlineLimit:_r,enablePausing:kr,exportEncoding:wr};const tn=17,xr=9e15,Nr=Math.log10(9e15),Sr=1/9e15,Cr=308,$r=-324,Dn=5,Mr=function(){const e=[];for(let n=$r+1;n<=Cr;n++)e.push(Number("1e"+n));const t=323;return function(n){return e[n+t]}}(),Qe=[2,Math.E,3,4,5,6,7,8,9,10],Tr=[[1,1.0891168053867777,1.1789745164521264,1.2701428397304229,1.3632066654400328,1.4587804913784246,1.557523817412741,1.660158301473385,1.767487542936873,1.8804205225512542,2],[1,1.1121114330934,1.23103892493161,1.35838369631113,1.49605193039935,1.64635423375119,1.81213853570186,1.99697132461829,2.20538955455724,2.44325744833852,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.18422737399915,1.4066113788546144,1.680911177655277,2.027492094355525,2.4775152854601967,3.080455730250329,3.918234505962507,5.1332705696484595,6.9878696918072905,10]],Ir=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]],m=function(t){return f.fromValue_noAlloc(t)},F=function(e,t,n){return f.fromComponents(e,t,n)},j=function(t,n,i){return f.fromComponents_noNormalize(t,n,i)},We=function(t,n){const i=n+1,r=Math.ceil(Math.log10(Math.abs(t))),a=Math.round(t*Math.pow(10,i-r))*Math.pow(10,r-i);return parseFloat(a.toFixed(Math.max(i-r,0)))},nn=function(e){return Math.sign(e)*Math.log10(Math.abs(e))},Pr=function(e){if(!isFinite(e))return e;if(e<-50)return e===Math.trunc(e)?Number.NEGATIVE_INFINITY:0;let t=1;for(;e<10;)t=t*e,++e;e-=1;let n=.9189385332046727;n=n+(e+.5)*Math.log(e),n=n-e;const i=e*e;let r=e;return n=n+1/(12*r),r=r*i,n=n+1/(360*r),r=r*i,n=n+1/(1260*r),r=r*i,n=n+1/(1680*r),r=r*i,n=n+1/(1188*r),r=r*i,n=n+691/(360360*r),r=r*i,n=n+7/(1092*r),r=r*i,n=n+3617/(122400*r),Math.exp(n)/t},Yn=.5671432904097838,Rn=function(e,t=1e-10){let n,i;if(!Number.isFinite(e)||e===0)return e;if(e===1)return Yn;e<10?n=0:n=Math.log(e)-Math.log(Math.log(e));for(let r=0;r<100;++r){if(i=(e*Math.exp(-n)+n*n)/(n+1),Math.abs(i-n)<t*Math.abs(i))return i;n=i}throw Error(`Iteration failed to converge: ${e.toString()}`)};function Bn(e,t=1e-10){let n,i,r,a;if(!Number.isFinite(e.mag)||e===f.dZero)return e;if(e===f.dOne)return m(Yn);f.abs(e),n=f.ln(e);for(let o=0;o<100;++o){if(i=f.exp(-n),r=n.sub(e.mul(i)),a=n.sub(r.div(n.add(1).sub(n.add(2).mul(r).div(f.mul(2,n).add(2))))),f.abs(a.sub(n)).lt(f.abs(a).mul(t)))return a;n=a}throw Error(`Iteration failed to converge: ${e.toString()}`)}const _=class{constructor(e){this.sign=Number.NaN,this.mag=Number.NaN,this.layer=Number.NaN,e instanceof _||e!=null&&typeof e=="object"&&"sign"in e&&"mag"in e&&"layer"in e?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0)}get m(){if(this.sign===0)return 0;if(this.layer===0){const e=Math.floor(Math.log10(this.mag));let t;return this.mag===5e-324?t=5:t=this.mag/Mr(e),this.sign*t}else if(this.layer===1){const e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}else return this.sign}set m(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer,this.exponent))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(e){this.fromMantissaExponent(this.m,e)}get s(){return this.sign}set s(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}get mantissa(){return this.m}set mantissa(e){this.m=e}get exponent(){return this.e}set exponent(e){this.e=e}static fromComponents(e,t,n){return new _().fromComponents(e,t,n)}static fromComponents_noNormalize(e,t,n){return new _().fromComponents_noNormalize(e,t,n)}static fromMantissaExponent(e,t){return new _().fromMantissaExponent(e,t)}static fromMantissaExponent_noNormalize(e,t){return new _().fromMantissaExponent_noNormalize(e,t)}static fromDecimal(e){return new _().fromDecimal(e)}static fromNumber(e){return new _().fromNumber(e)}static fromString(e){return new _().fromString(e)}static fromValue(e){return new _().fromValue(e)}static fromValue_noAlloc(e){return e instanceof _?e:new _(e)}static abs(e){return m(e).abs()}static neg(e){return m(e).neg()}static negate(e){return m(e).neg()}static negated(e){return m(e).neg()}static sign(e){return m(e).sign}static sgn(e){return m(e).sign}static round(e){return m(e).round()}static floor(e){return m(e).floor()}static ceil(e){return m(e).ceil()}static trunc(e){return m(e).trunc()}static add(e,t){return m(e).add(t)}static plus(e,t){return m(e).add(t)}static sub(e,t){return m(e).sub(t)}static subtract(e,t){return m(e).sub(t)}static minus(e,t){return m(e).sub(t)}static mul(e,t){return m(e).mul(t)}static multiply(e,t){return m(e).mul(t)}static times(e,t){return m(e).mul(t)}static div(e,t){return m(e).div(t)}static divide(e,t){return m(e).div(t)}static recip(e){return m(e).recip()}static reciprocal(e){return m(e).recip()}static reciprocate(e){return m(e).reciprocate()}static cmp(e,t){return m(e).cmp(t)}static cmpabs(e,t){return m(e).cmpabs(t)}static compare(e,t){return m(e).cmp(t)}static isNaN(e){return e=m(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)}static isFinite(e){return e=m(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)}static eq(e,t){return m(e).eq(t)}static equals(e,t){return m(e).eq(t)}static neq(e,t){return m(e).neq(t)}static notEquals(e,t){return m(e).notEquals(t)}static lt(e,t){return m(e).lt(t)}static lte(e,t){return m(e).lte(t)}static gt(e,t){return m(e).gt(t)}static gte(e,t){return m(e).gte(t)}static max(e,t){return m(e).max(t)}static min(e,t){return m(e).min(t)}static minabs(e,t){return m(e).minabs(t)}static maxabs(e,t){return m(e).maxabs(t)}static clamp(e,t,n){return m(e).clamp(t,n)}static clampMin(e,t){return m(e).clampMin(t)}static clampMax(e,t){return m(e).clampMax(t)}static cmp_tolerance(e,t,n){return m(e).cmp_tolerance(t,n)}static compare_tolerance(e,t,n){return m(e).cmp_tolerance(t,n)}static eq_tolerance(e,t,n){return m(e).eq_tolerance(t,n)}static equals_tolerance(e,t,n){return m(e).eq_tolerance(t,n)}static neq_tolerance(e,t,n){return m(e).neq_tolerance(t,n)}static notEquals_tolerance(e,t,n){return m(e).notEquals_tolerance(t,n)}static lt_tolerance(e,t,n){return m(e).lt_tolerance(t,n)}static lte_tolerance(e,t,n){return m(e).lte_tolerance(t,n)}static gt_tolerance(e,t,n){return m(e).gt_tolerance(t,n)}static gte_tolerance(e,t,n){return m(e).gte_tolerance(t,n)}static pLog10(e){return m(e).pLog10()}static absLog10(e){return m(e).absLog10()}static log10(e){return m(e).log10()}static log(e,t){return m(e).log(t)}static log2(e){return m(e).log2()}static ln(e){return m(e).ln()}static logarithm(e,t){return m(e).logarithm(t)}static pow(e,t){return m(e).pow(t)}static pow10(e){return m(e).pow10()}static root(e,t){return m(e).root(t)}static factorial(e,t){return m(e).factorial()}static gamma(e,t){return m(e).gamma()}static lngamma(e,t){return m(e).lngamma()}static exp(e){return m(e).exp()}static sqr(e){return m(e).sqr()}static sqrt(e){return m(e).sqrt()}static cube(e){return m(e).cube()}static cbrt(e){return m(e).cbrt()}static tetrate(e,t=2,n=j(1,0,1)){return m(e).tetrate(t,n)}static iteratedexp(e,t=2,n=j(1,0,1)){return m(e).iteratedexp(t,n)}static iteratedlog(e,t=10,n=1){return m(e).iteratedlog(t,n)}static layeradd10(e,t){return m(e).layeradd10(t)}static layeradd(e,t,n=10){return m(e).layeradd(t,n)}static slog(e,t=10){return m(e).slog(t)}static lambertw(e){return m(e).lambertw()}static ssqrt(e){return m(e).ssqrt()}static pentate(e,t=2,n=j(1,0,1)){return m(e).pentate(t,n)}static affordGeometricSeries(e,t,n,i){return this.affordGeometricSeries_core(m(e),m(t),m(n),i)}static sumGeometricSeries(e,t,n,i){return this.sumGeometricSeries_core(e,m(t),m(n),i)}static affordArithmeticSeries(e,t,n,i){return this.affordArithmeticSeries_core(m(e),m(t),m(n),m(i))}static sumArithmeticSeries(e,t,n,i){return this.sumArithmeticSeries_core(m(e),m(t),m(n),m(i))}static efficiencyOfPurchase(e,t,n){return this.efficiencyOfPurchase_core(m(e),m(t),m(n))}static randomDecimalForTesting(e){if(Math.random()*20<1)return j(0,0,0);const t=Math.random()>.5?1:-1;if(Math.random()*20<1)return j(t,0,1);const n=Math.floor(Math.random()*(e+1));let i=n===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(i=Math.trunc(i));let r=Math.pow(10,i);return Math.random()>.9&&(r=Math.trunc(r)),F(t,n,r)}static affordGeometricSeries_core(e,t,n,i){const r=t.mul(n.pow(i));return _.floor(e.div(r).mul(n.sub(1)).add(1).log10().div(n.log10()))}static sumGeometricSeries_core(e,t,n,i){return t.mul(n.pow(i)).mul(_.sub(1,n.pow(e))).div(_.sub(1,n))}static affordArithmeticSeries_core(e,t,n,i){const a=t.add(i.mul(n)).sub(n.div(2)),o=a.pow(2);return a.neg().add(o.add(n.mul(e).mul(2)).sqrt()).div(n).floor()}static sumArithmeticSeries_core(e,t,n,i){const r=t.add(i.mul(n));return e.div(2).mul(r.mul(2).plus(e.sub(1).mul(n)))}static efficiencyOfPurchase_core(e,t,n){return e.div(t).add(e.div(n))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<Sr)return this.layer+=1,this.mag=Math.log10(this.mag),this;let e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=xr)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<Nr&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this.normalize(),this}fromComponents_noNormalize(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this}fromMantissaExponent(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}fromMantissaExponent_noNormalize(e,t){return this.fromMantissaExponent(e,t),this}fromDecimal(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}fromNumber(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}fromString(e){e=e.replace(",","");const t=e.split("^^^");if(t.length===2){const b=parseFloat(t[0]),w=parseFloat(t[1]),S=t[1].split(";");let $=1;if(S.length===2&&($=parseFloat(S[1]),isFinite($)||($=1)),isFinite(b)&&isFinite(w)){const R=_.pentate(b,w,$);return this.sign=R.sign,this.layer=R.layer,this.mag=R.mag,this}}const n=e.split("^^");if(n.length===2){const b=parseFloat(n[0]),w=parseFloat(n[1]),S=n[1].split(";");let $=1;if(S.length===2&&($=parseFloat(S[1]),isFinite($)||($=1)),isFinite(b)&&isFinite(w)){const R=_.tetrate(b,w,$);return this.sign=R.sign,this.layer=R.layer,this.mag=R.mag,this}}const i=e.split("^");if(i.length===2){const b=parseFloat(i[0]),w=parseFloat(i[1]);if(isFinite(b)&&isFinite(w)){const S=_.pow(b,w);return this.sign=S.sign,this.layer=S.layer,this.mag=S.mag,this}}e=e.trim().toLowerCase();let r,a,o=e.split("pt");if(o.length===2){r=10,a=parseFloat(o[0]),o[1]=o[1].replace("(",""),o[1]=o[1].replace(")","");let b=parseFloat(o[1]);if(isFinite(b)||(b=1),isFinite(r)&&isFinite(a)){const w=_.tetrate(r,a,b);return this.sign=w.sign,this.layer=w.layer,this.mag=w.mag,this}}if(o=e.split("p"),o.length===2){r=10,a=parseFloat(o[0]),o[1]=o[1].replace("(",""),o[1]=o[1].replace(")","");let b=parseFloat(o[1]);if(isFinite(b)||(b=1),isFinite(r)&&isFinite(a)){const w=_.tetrate(r,a,b);return this.sign=w.sign,this.layer=w.layer,this.mag=w.mag,this}}const s=e.split("e"),u=s.length-1;if(u===0){const b=parseFloat(e);if(isFinite(b))return this.fromNumber(b)}else if(u===1){const b=parseFloat(e);if(isFinite(b)&&b!==0)return this.fromNumber(b)}const c=e.split("e^");if(c.length===2){this.sign=1,c[0].charAt(0)=="-"&&(this.sign=-1);let b="";for(let w=0;w<c[1].length;++w){const S=c[1].charCodeAt(w);if(S>=43&&S<=57||S===101)b+=c[1].charAt(w);else return this.layer=parseFloat(b),this.mag=parseFloat(c[1].substr(w+1)),this.normalize(),this}}if(u<1)return this.sign=0,this.layer=0,this.mag=0,this;const h=parseFloat(s[0]);if(h===0)return this.sign=0,this.layer=0,this.mag=0,this;let v=parseFloat(s[s.length-1]);if(u>=2){const b=parseFloat(s[s.length-2]);isFinite(b)&&(v*=Math.sign(b),v+=nn(b))}if(!isFinite(h))this.sign=s[0]==="-"?-1:1,this.layer=u,this.mag=v;else if(u===1)this.sign=Math.sign(h),this.layer=1,this.mag=v+Math.log10(Math.abs(h));else if(this.sign=Math.sign(h),this.layer=u,u===2){const b=_.mul(F(1,2,v),m(h));return this.sign=b.sign,this.layer=b.layer,this.mag=b.mag,this}else this.mag=v;return this.normalize(),this}fromValue(e){return e instanceof _||e!=null&&typeof e=="object"&&"sign"in e&&"mag"in e&&"layer"in e?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(e){return isNaN(this.m)?Number.NaN:this.m===0?0:We(this.m,e)}magnitudeWithDecimalPlaces(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:We(this.mag,e)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=Dn?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}toFixed(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}toPrecision(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):We(this.m,e)+"e"+We(this.e,e):this.layer===1?We(this.m,e)+"e"+We(this.e,e):this.layer<=Dn?(this.sign===-1?"-":"")+"e".repeat(this.layer)+We(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+We(this.mag,e)}abs(){return j(this.sign===0?0:1,this.layer,this.mag)}neg(){return j(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?_.dZero:this.layer===0?F(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?_.dZero:this.layer===0?F(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?_.dZero:this.layer===0?F(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?_.dZero:this.layer===0?F(this.sign,0,Math.trunc(this.mag)):this}add(e){const t=m(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return j(0,0,0);let n,i;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(_.cmpabs(this,t)>0?(n=this,i=t):(n=t,i=this),n.layer===0&&i.layer===0)return m(n.sign*n.mag+i.sign*i.mag);const r=n.layer*Math.sign(n.mag),a=i.layer*Math.sign(i.mag);if(r-a>=2)return n;if(r===0&&a===-1){if(Math.abs(i.mag-Math.log10(n.mag))>tn)return n;{const o=Math.pow(10,Math.log10(n.mag)-i.mag),s=i.sign+n.sign*o;return F(Math.sign(s),1,i.mag+Math.log10(Math.abs(s)))}}if(r===1&&a===0){if(Math.abs(n.mag-Math.log10(i.mag))>tn)return n;{const o=Math.pow(10,n.mag-Math.log10(i.mag)),s=i.sign+n.sign*o;return F(Math.sign(s),1,Math.log10(i.mag)+Math.log10(Math.abs(s)))}}if(Math.abs(n.mag-i.mag)>tn)return n;{const o=Math.pow(10,n.mag-i.mag),s=i.sign+n.sign*o;return F(Math.sign(s),1,i.mag+Math.log10(Math.abs(s)))}}plus(e){return this.add(e)}sub(e){return this.add(m(e).neg())}subtract(e){return this.sub(e)}minus(e){return this.sub(e)}mul(e){const t=m(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return j(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return j(this.sign*t.sign,0,1);let n,i;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(n=this,i=t):(n=t,i=this),n.layer===0&&i.layer===0)return m(n.sign*i.sign*n.mag*i.mag);if(n.layer>=3||n.layer-i.layer>=2)return F(n.sign*i.sign,n.layer,n.mag);if(n.layer===1&&i.layer===0)return F(n.sign*i.sign,1,n.mag+Math.log10(i.mag));if(n.layer===1&&i.layer===1)return F(n.sign*i.sign,1,n.mag+i.mag);if(n.layer===2&&i.layer===1){const r=F(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(F(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)));return F(n.sign*i.sign,r.layer+1,r.sign*r.mag)}if(n.layer===2&&i.layer===2){const r=F(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(F(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)));return F(n.sign*i.sign,r.layer+1,r.sign*r.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}multiply(e){return this.mul(e)}times(e){return this.mul(e)}div(e){const t=m(e);return this.mul(t.recip())}divide(e){return this.div(e)}divideBy(e){return this.div(e)}dividedBy(e){return this.div(e)}recip(){return this.mag===0?_.dNaN:this.layer===0?F(this.sign,0,1/this.mag):F(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(e){const t=m(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}cmpabs(e){const t=m(e),n=this.mag>0?this.layer:-this.layer,i=t.mag>0?t.layer:-t.layer;return n>i?1:n<i?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}compare(e){return this.cmp(e)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(e){const t=m(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}equals(e){return this.eq(e)}neq(e){return!this.eq(e)}notEquals(e){return this.neq(e)}lt(e){return this.cmp(e)===-1}lte(e){return!this.gt(e)}gt(e){return this.cmp(e)===1}gte(e){return!this.lt(e)}max(e){const t=m(e);return this.lt(t)?t:this}min(e){const t=m(e);return this.gt(t)?t:this}maxabs(e){const t=m(e);return this.cmpabs(t)<0?t:this}minabs(e){const t=m(e);return this.cmpabs(t)>0?t:this}clamp(e,t){return this.max(e).min(t)}clampMin(e){return this.max(e)}clampMax(e){return this.min(e)}cmp_tolerance(e,t){const n=m(e);return this.eq_tolerance(n,t)?0:this.cmp(n)}compare_tolerance(e,t){return this.cmp_tolerance(e,t)}eq_tolerance(e,t){const n=m(e);if(t==null&&(t=1e-7),this.sign!==n.sign||Math.abs(this.layer-n.layer)>1)return!1;let i=this.mag,r=n.mag;return this.layer>n.layer&&(r=nn(r)),this.layer<n.layer&&(i=nn(i)),Math.abs(i-r)<=t*Math.max(Math.abs(i),Math.abs(r))}equals_tolerance(e,t){return this.eq_tolerance(e,t)}neq_tolerance(e,t){return!this.eq_tolerance(e,t)}notEquals_tolerance(e,t){return this.neq_tolerance(e,t)}lt_tolerance(e,t){const n=m(e);return!this.eq_tolerance(n,t)&&this.lt(n)}lte_tolerance(e,t){const n=m(e);return this.eq_tolerance(n,t)||this.lt(n)}gt_tolerance(e,t){const n=m(e);return!this.eq_tolerance(n,t)&&this.gt(n)}gte_tolerance(e,t){const n=m(e);return this.eq_tolerance(n,t)||this.gt(n)}pLog10(){return this.lt(_.dZero)?_.dZero:this.log10()}absLog10(){return this.sign===0?_.dNaN:this.layer>0?F(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):F(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?_.dNaN:this.layer>0?F(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):F(this.sign,0,Math.log10(this.mag))}log(e){return e=m(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?_.dNaN:this.layer===0&&e.layer===0?F(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):_.div(this.log10(),e.log10())}log2(){return this.sign<=0?_.dNaN:this.layer===0?F(this.sign,0,Math.log2(this.mag)):this.layer===1?F(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?F(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):F(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?_.dNaN:this.layer===0?F(this.sign,0,Math.log(this.mag)):this.layer===1?F(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?F(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):F(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(e){return this.log(e)}pow(e){const t=m(e),n=this,i=t;if(n.sign===0)return i.eq(0)?j(1,0,1):n;if(n.sign===1&&n.layer===0&&n.mag===1)return n;if(i.sign===0)return j(1,0,1);if(i.sign===1&&i.layer===0&&i.mag===1)return n;const r=n.absLog10().mul(i).pow10();return this.sign===-1?Math.abs(i.toNumber()%2)%2===1?r.neg():Math.abs(i.toNumber()%2)%2===0?r:_.dNaN:r}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return _.dNaN;let e=this;if(e.layer===0){const t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return F(1,0,t);if(e.sign===0)return _.dOne;e=j(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?F(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?F(-e.sign,e.layer+1,-e.mag):_.dOne}pow_base(e){return m(e).pow(this)}root(e){const t=m(e);return this.pow(t.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?_.exp(_.mul(this,_.ln(this).sub(1))):_.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(j(1,0,24)))return m(Pr(this.sign*this.mag));const e=this.mag-1;let t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;const n=e*e;let i=e,r=12*i,a=1/r,o=t+a;if(o===t||(t=o,i=i*n,r=360*i,a=1/r,o=t-a,o===t))return _.exp(t);t=o,i=i*n,r=1260*i;let s=1/r;return t=t+s,i=i*n,r=1680*i,s=1/r,t=t-s,_.exp(t)}else return this.layer===1?_.exp(_.mul(this,_.ln(this).sub(1))):_.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?_.dOne:this.layer===0&&this.mag<=709.7?m(Math.exp(this.sign*this.mag)):this.layer===0?F(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?F(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):F(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return m(Math.sqrt(this.sign*this.mag));if(this.layer===1)return F(1,2,Math.log10(this.mag)-.3010299956639812);{const e=_.div(j(this.sign,this.layer-1,this.mag),j(1,0,2));return e.layer+=1,e.normalize(),e}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(e=2,t=j(1,0,1)){if(e===1)return _.pow(this,t);if(e===0)return new _(t);if(this.eq(_.dOne))return _.dOne;if(this.eq(-1))return _.pow(this,t);if(e===Number.POSITIVE_INFINITY){const r=this.toNumber();if(r<=1.444667861009766&&r>=.06598803584531254){if(r>1.444667861009099)return new _(Math.E);const a=_.ln(this).neg();return a.lambertw().div(a)}else return r>1.444667861009766?new _(Number.POSITIVE_INFINITY):_.dNaN}if(this.eq(_.dZero)){let r=Math.abs((e+1)%2);return r>1&&(r=2-r),new _(r)}if(e<0)return _.iteratedlog(t,this,-e);t=m(t);const n=e;e=Math.trunc(e);const i=n-e;if(this.gt(_.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(let r=0;r<e;++r){const a=t;if(t=this.pow(t),a.eq(t))return t}if(i!=0){const r=this.pow(t);return t.mul(1-i).add(r.mul(i))}return t}i!==0&&(t.eq(_.dOne)?this.gt(10)?t=this.pow(i):(t=m(_.tetrate_critical(this.toNumber(),i)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(i):t=t.layeradd(i,this));for(let r=0;r<e;++r){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return j(t.sign,t.layer+(e-r-1),t.mag);if(r>1e4)return t}return t}iteratedexp(e=2,t=j(1,0,1)){return this.tetrate(e,t)}iteratedlog(e=10,t=1){if(t<0)return _.tetrate(e,-t,this);e=m(e);let n=m(this);const i=t;t=Math.trunc(t);const r=i-t;if(n.layer-e.layer>3){const a=Math.min(t,n.layer-e.layer-3);t-=a,n.layer-=a}for(let a=0;a<t;++a){if(n=n.log(e),!isFinite(n.layer)||!isFinite(n.mag))return n.normalize();if(a>1e4)return n}return r>0&&r<1&&(e.eq(10)?n=n.layeradd10(-r):n=n.layeradd(-r,e)),n}slog(e=10){if(e=m(e),e.lte(_.dZero)||e.eq(_.dOne))return _.dNaN;if(e.lt(_.dOne))return this.eq(_.dOne)?_.dZero:this.eq(_.dZero)?_.dNegOne:_.dNaN;if(this.mag<0||this.eq(_.dZero))return _.dNegOne;let t=0,n=m(this);if(n.layer-e.layer>3){const i=n.layer-e.layer-3;t+=i,n.layer-=i}for(let i=0;i<100;++i)if(n.lt(_.dZero))n=_.pow(e,n),t-=1;else{if(n.lte(_.dOne))return m(t+_.slog_critical(e.toNumber(),n.toNumber()));t+=1,n=_.log(n,e)}return m(t)}static slog_critical(e,t){return e>10?t-1:_.critical_section(e,t,Ir)}static tetrate_critical(e,t){return _.critical_section(e,t,Tr)}static critical_section(e,t,n){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);let i=0,r=0;for(let s=0;s<Qe.length;++s)if(Qe[s]==e){i=n[s][Math.floor(t)],r=n[s][Math.ceil(t)];break}else if(Qe[s]<e&&Qe[s+1]>e){const u=(e-Qe[s])/(Qe[s+1]-Qe[s]);i=n[s][Math.floor(t)]*(1-u)+n[s+1][Math.floor(t)]*u,r=n[s][Math.ceil(t)]*(1-u)+n[s+1][Math.ceil(t)]*u;break}const a=t-Math.floor(t);return i*(1-a)+r*a}layeradd10(e){e=_.fromValue_noAlloc(e).toNumber();const t=m(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);const n=Math.trunc(e);e-=n,t.layer+=n}if(e<=-1){const n=Math.trunc(e);if(e-=n,t.layer+=n,t.layer<0)for(let i=0;i<100;++i){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}layeradd(e,t){const i=this.slog(t).toNumber()+e;return i>=0?_.tetrate(t,i):Number.isFinite(i)?i>=-1?_.log(_.tetrate(t,i+1),t):_.log(_.log(_.tetrate(t,i+2),t),t):_.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return m(Rn(this.toNumber()));if(this.layer===0)return m(Rn(this.sign*this.mag));if(this.layer===1)return Bn(this);if(this.layer===2)return Bn(this);if(this.layer>=3)return j(this.sign,this.layer-1,this.mag);throw"Unhandled behavior in lambertw()"}ssqrt(){if(this.sign==1&&this.layer>=3)return j(this.sign,this.layer-1,this.mag);const e=this.ln();return e.div(e.lambertw())}pentate(e=2,t=j(1,0,1)){t=m(t);const n=e;e=Math.trunc(e);const i=n-e;i!==0&&(t.eq(_.dOne)?(++e,t=new _(i)):this.eq(10)?t=t.layeradd10(i):t=t.layeradd(i,this));for(let r=0;r<e;++r){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(r>10)return t}return t}sin(){return this.mag<0?this:this.layer===0?m(Math.sin(this.sign*this.mag)):j(0,0,0)}cos(){return this.mag<0?_.dOne:this.layer===0?m(Math.cos(this.sign*this.mag)):j(0,0,0)}tan(){return this.mag<0?this:this.layer===0?m(Math.tan(this.sign*this.mag)):j(0,0,0)}asin(){return this.mag<0?this:this.layer===0?m(Math.asin(this.sign*this.mag)):j(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?m(Math.acos(this.toNumber())):this.layer===0?m(Math.acos(this.sign*this.mag)):j(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?m(Math.atan(this.sign*this.mag)):m(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return _.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return _.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?j(Number.NaN,Number.NaN,Number.NaN):_.ln(this.add(1).div(m(1).sub(this))).div(2)}ascensionPenalty(e){return e===0?this:this.root(_.pow(10,e))}egg(){return this.add(9)}lessThanOrEqualTo(e){return this.cmp(e)<1}lessThan(e){return this.cmp(e)<0}greaterThanOrEqualTo(e){return this.cmp(e)>-1}greaterThan(e){return this.cmp(e)>0}};let f=_;f.dZero=j(0,0,0);f.dOne=j(1,0,1);f.dNegOne=j(-1,0,1);f.dTwo=j(1,0,2);f.dTen=j(1,0,10);f.dNaN=j(Number.NaN,Number.NaN,Number.NaN);f.dInf=j(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);f.dNegInf=j(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);f.dNumberMax=F(1,0,Number.MAX_VALUE);f.dNumberMin=F(1,0,Number.MIN_VALUE);const Or=new f(1);function vt(e,t,n=!0){let i=f.log10(e).floor(),r=f.div(e,f.pow(10,i));r.toStringWithDecimalPlaces(t)==="10"&&(r=Or,i=i.add(1));const a=i.gte(1e9)?$e(i,Math.max(Math.max(t,3),J.defaultDecimalsShown)):i.gte(1e4)?Ut(i,0):i.toStringWithDecimalPlaces(0);return n?r.toStringWithDecimalPlaces(t)+"e"+a:"e"+a}function Ut(e,t){if(e==null)return"NaN";if(e=new f(e),e.mag<.001)return 0 .toFixed(t);const i=e.toStringWithDecimalPlaces(t).split(".");return i[0]=i[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),i.length==1?i[0]:i[0]+"."+i[1]}function Kn(e,t){return e==null?"NaN":(e=new f(e),e.mag<1e-4?0 .toFixed(t):(e.mag<.1&&t!==0&&(t=Math.max(Math.max(t,e.log10().negate().ceil().toNumber()),J.defaultDecimalsShown)),e.toStringWithDecimalPlaces(t)))}const Ar=new f("eeee1000"),Er=new f("e100000"),qn=new f("e1000"),Zn=new f(1e9),Vr=new f(1e6),Fr=new f(1e3),Dr=new f(.98),Rr=new f(.001),Jn=new f(0);function $e(e,t,n){if(t==null&&(t=J.defaultDecimalsShown),n=n!=null?n:J.defaultShowSmall,e=new f(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag))return"NaN";if(e.sign<0)return"-"+$e(e.neg(),t);if(e.mag===Number.POSITIVE_INFINITY)return"Infinity";if(e.gte(Ar)){const i=e.slog();return i.gte(Vr)?"F"+$e(i.floor()):f.pow(10,i.sub(i.floor())).toStringWithDecimalPlaces(3)+"F"+Ut(i.floor(),0)}else{if(e.gte(Er))return vt(e,0,!1);if(e.gte(qn))return vt(e,0);if(e.gte(Zn))return vt(e,t);if(e.gte(Fr))return Ut(e,0);if(e.gte(Rr)||!n)return Kn(e,t);if(e.eq(Jn))return 0 .toFixed(t)}return e=Qn(e),e.lt(qn)?vt(e,t).replace(/([^(?:e|F)]*)$/,"-$1"):$e(e,t)+"\u207B\xB9"}function Ce(e){return e=new f(e),e.sign<0?"-"+Ce(e.neg()):e.gte(Zn)||e.lte(Dr)&&!e.eq(Jn)?$e(e):$e(e,0)}function Xn(e){return f.lt(e,0)?"-"+Xn(f.neg(e)):f.gt(e,2**51)?$e(f.div(e,31536e3))+"y":(e=new f(e).toNumber(),e<60?$e(e)+"s":e<3600?Ce(Math.floor(e/60))+"m "+$e(e%60)+"s":e<86400?Ce(Math.floor(e/3600))+"h "+Ce(Math.floor(e/60)%60)+"m "+Ce(e%60)+"s":e<31536e3?Ce(Math.floor(e/84600)%365)+"d "+Ce(Math.floor(e/3600)%24)+"h "+Ce(Math.floor(e/60)%60)+"m":Ce(Math.floor(e/31536e3))+"y "+Ce(Math.floor(e/84600)%365)+"d "+Ce(Math.floor(e/3600)%24)+"h")}function Br(e,t,n){e=new f(e);let i=e.toStringWithDecimalPlaces(t);return new f(i).gte(n)&&(i=f.sub(n,Math.pow(.1,t)).toStringWithDecimalPlaces(t)),i}function qr(e,t){return $e(e,t,!0)}function Qn(e){let t=f.log10(e).ceil();const n=f.div(e,f.pow(10,t));return t=t.neg(),e=new f(10).pow(t).times(n),e}var Lr=Object.freeze(Object.defineProperty({__proto__:null,default:f,exponentialFormat:vt,commaFormat:Ut,regularFormat:Kn,format:$e,formatWhole:Ce,formatTime:Xn,toPlaces:Br,formatSmall:qr,invertOOM:Qn},Symbol.toStringTag,{value:"Module"}));const{exponentialFormat:jr,commaFormat:zr,regularFormat:Ur,format:se,formatWhole:ve,formatTime:Jt,toPlaces:Gr,formatSmall:Hr,invertOOM:Wr}=Lr;window.Decimal=f;window.exponentialFormat=jr;window.commaFormat=zr;window.regularFormat=Ur;window.format=se;window.formatWhole=ve;window.formatTime=Jt;window.toPlaces=Gr;window.formatSmall=Hr;window.invertOOM=Wr;function ei(e){let t=e.replace(/([A-Z])/g," $1");return t=t.charAt(0).toUpperCase()+t.slice(1),t}function tt(e){return typeof e=="function"}var X=(e=>(e.Up="Up",e.Down="Down",e.Left="Left",e.Right="Right",e.Default="Up",e))(X||{});const wt=Symbol("DoNotCache");function y(e,t){const n=e[t];tt(n)&&n.length===0&&!n[wt]?e[t]=N(n.bind(e)):tt(n)&&(e[t]=n.bind(e),e[t][wt]=!0)}function Me(e){return tt(e)&&!e[wt]&&(e=N(e)),e}const de=Symbol("Component"),me=Symbol("GatherProps");let Yr=0;function he(e="feature-"){return e+Yr++}var B=(e=>(e[e.Visible=0]="Visible",e[e.Hidden=1]="Hidden",e[e.None=2]="None",e))(B||{});function L(e){return e[wt]=!0,e}function gt(e,t=2){return e?0:t}function z(e,t,n){e[t]===void 0&&n!=null&&(e[t]=n)}function ti(e,...t){const n=[],i=r=>{Object.keys(r).forEach(a=>{const o=r[a];o&&typeof o=="object"&&(t.includes(o.type)?n.push(o):!(o instanceof f)&&!pe(o)&&i(o))})};return i(e),n}const et={variables:{"--foreground":"#dfdfdf","--background":"#0f0f0f","--feature-foreground":"#0f0f0f","--tooltip-background":"rgba(0, 0, 0, 0.75)","--raised-background":"#0f0f0f","--points":"#ffffff","--locked":"#bf8f8f","--highlighted":"#333","--bought":"#77bf5f","--danger":"rgb(220, 53, 69)","--link":"#02f2f2","--outline":"#dfdfdf","--accent1":"#627a82","--accent2":"#658262","--accent3":"#7c6282","--border-radius":"15px","--modal-border":"solid 2px var(--color)","--feature-margin":"0px"},floatingTabs:!0,mergeAdjacent:!0,showPin:!0};var pn=(e=>(e.Classic="classic",e.Paper="paper",e.Nordic="nordic",e.Aqua="aqua",e))(pn||{}),ze={classic:et,paper:{...et,variables:{...et.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--locked":"#3a3e45","--bought":"#5C8A58","--outline":"#333c4a","--border-radius":"4px","--modal-border":"","--feature-margin":"5px"},floatingTabs:!1},nordic:{...et,variables:{...et.variables,"--foreground":"#D8DEE9","--background":"#2E3440","--feature-foreground":"#000","--raised-background":"#3B4252","--points":"#E5E9F0","--locked":"#4c566a","--highlighted":"#434c5e","--bought":"#8FBCBB","--danger":"#D08770","--link":"#88C0D0","--outline":"#3B4252","--accent1":"#B48EAD","--accent2":"#A3BE8C","--accent3":"#EBCB8B","--border-radius":"4px","--modal-border":"solid 2px #3B4252","--feature-margin":"5px"},floatingTabs:!1},aqua:{...et,variables:{...et.variables,"--foreground":"#bfdfff","--background":"#001f3f","--tooltip-background":"rgba(0, 15, 31, 0.75)","--raised-background":"#001f3f","--points":"#dfefff","--locked":"#c4a7b3","--outline":"#bfdfff"}}};const fe=Symbol("ProxyState"),st=Symbol("ProxyPath");function le(e,t={}){const n=t;let i=!1;function r(){return i||(Object.assign(n,e(n)),i=!0),n}return new Proxy(n,{get(a,o){return o===fe?r():r()[o]},set(a,o,s){return r()[o]=s,!0},has(a,o){return o===fe?!0:Reflect.has(r(),o)},ownKeys(){return Reflect.ownKeys(r())},getOwnPropertyDescriptor(a,o){return i||(Object.assign(n,e(n)),i=!0),Object.getOwnPropertyDescriptor(a,o)}})}var ie=window.state=Yt({lastTenTicks:[],hasNaN:!1,NaNPath:[]});const ni=Mt({id:"",devSpeed:null,name:"",tabs:[],time:-1,autosave:!0,offlineProd:!0,offlineTime:null,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",layers:{}});function ii(e){return JSON.stringify(e,(t,n)=>l(n))}const ri={get(e,t){var i;if(t===fe||t===st)return e[t];const n=e[fe][t];if(t!=="value"&&(Gi(n)||Array.isArray(n))){if(n!==((i=e[t])==null?void 0:i[fe])){const r=[...e[st],t];e[t]=new Proxy({[fe]:n,[st]:r},ri)}return e[t]}return n},set(e,t,n,i){if(!ie.hasNaN&&(typeof n=="number"&&isNaN(n)||n instanceof f&&(isNaN(n.sign)||isNaN(n.layer)||isNaN(n.mag)))){const r=e[fe][t];if(!(typeof r=="number"&&isNaN(r)||r instanceof f&&(isNaN(r.sign)||isNaN(r.layer)||isNaN(r.mag))))throw ni.autosave=!1,ie.hasNaN=!0,ie.NaNPath=[...e[st],t],ie.NaNReceiver=i,console.error("Attempted to set NaN value",[...e[st],t],e[fe]),"Attempted to set NaN value. See above for details"}return e[fe][t]=n,!0},ownKeys(e){return Reflect.ownKeys(e[fe])},has(e,t){return Reflect.has(e[fe],t)},getOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e[fe],t)}};var T=window.player=new Proxy({[fe]:ni,[st]:["player"]},ri);const ge=Wn();let lt=null,ht=null;function Gt(){const e=Date.now();let t=(e-T.time)/1e3;T.time=e;const n=t;if(ie.lastTenTicks.push(n),ie.lastTenTicks.length>10&&(ie.lastTenTicks=ie.lastTenTicks.slice(1)),!((ht==null?void 0:ht.value)&&!T.keepGoing)&&!ie.hasNaN&&(t=Math.max(t,0),T.devSpeed!==0)){if(T.offlineTime!=null){if(f.gt(T.offlineTime,J.offlineLimit*3600)&&(T.offlineTime=J.offlineLimit*3600),f.gt(T.offlineTime,0)&&T.devSpeed!==0){const i=Math.max(T.offlineTime/10,t);T.offlineTime=T.offlineTime-i,t+=i}else T.devSpeed===0&&(T.offlineTime+=t);(!T.offlineProd||f.lt(T.offlineTime,0))&&(T.offlineTime=null)}t=Math.min(t,J.maxTickLength),T.devSpeed!=null&&(t*=T.devSpeed),Number.isFinite(t)||(t=1e308),!f.eq(t,0)&&(T.timePlayed+=t,Number.isFinite(T.timePlayed)||(T.timePlayed=1e308),ge.emit("update",t,n),Z.unthrottled?(requestAnimationFrame(Gt),lt!=null&&(clearInterval(lt),lt=null)):lt==null&&(lt=setInterval(Gt,50)))}}async function Kr(){ht=(await zt(()=>Promise.resolve().then(function(){return Ai}),void 0)).hasWon,Ie(ht,e=>{e&&ge.emit("gameWon")}),Z.unthrottled?requestAnimationFrame(Gt):lt=setInterval(Gt,50)}var Zr=Object.freeze(Object.defineProperty({__proto__:null,globalBus:ge,startGameLoop:Kr},Symbol.toStringTag,{value:"Module"}));function ai(e={}){return Object.assign({id:`${J.id}-0`,name:"Default Save",tabs:J.initialTabs.slice(),time:Date.now(),autosave:!0,offlineProd:!0,offlineTime:0,timePlayed:0,keepGoing:!1,modID:J.id,modVersion:J.versionNumber,layers:{}},e)}function Ae(e){const t=Ye.compressToUTF16(ii(e!=null?e:T[fe]));return localStorage.setItem((e!=null?e:T[fe]).id,t),t}async function Jr(){Qr();try{let e=localStorage.getItem(Z.active);if(e==null){await nt(ut());return}if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=Ye.decompressFromUTF16(e);else throw"Unable to determine save encoding";const t=JSON.parse(e);if(t.modID!==J.id){await nt(ut());return}t.id=Z.active,await nt(t)}catch(e){console.error(`Failed to load save. Falling back to new save.
`,e),await nt(ut())}}function ut(){const e=qt(),t=ai({id:e});return Ae(t),Z.saves.push(e),t}function qt(){let e,t=0;do e=`${J.id}-${t++}`;while(localStorage.getItem(e));return e}async function nt(e){console.info("Loading save",e);const{layers:t,removeLayer:n,addLayer:i}=await zt(()=>Promise.resolve().then(function(){return ya}),void 0),{fixOldSave:r,getInitialLayers:a}=await zt(()=>Promise.resolve().then(function(){return Ai}),void 0);for(const o in t){const s=t[o];s&&n(s)}a(e).forEach(o=>i(o,e)),e=ai(e),e.offlineProd&&e.time&&(e.offlineTime==null&&(e.offlineTime=0),e.offlineTime+=(Date.now()-e.time)/1e3),e.time=Date.now(),e.modVersion!==J.versionNumber&&r(e.modVersion,e),Object.assign(T,e),Z.active=T.id,ge.emit("onLoad")}setInterval(()=>{T.autosave&&Ae()},1e3);window.onbeforeunload=()=>{T.autosave&&Ae()};window.save=Ae;const Xr=window.hardReset=async()=>{await nt(ut())},xt=Mt({active:"",saves:[],showTPS:!0,theme:pn.Nordic,unthrottled:!1});Ie(xt,e=>{const t=Ye.compressToUTF16(JSON.stringify(e));localStorage.setItem(J.id,t)},{deep:!0});var Z=window.settings=xt;window.hardResetSettings=()=>{const e={active:"",saves:[],showTPS:!0,theme:pn.Nordic};ge.emit("loadSettings",e),Object.assign(xt,e),Xr()};function Qr(){try{let e=localStorage.getItem(J.id);if(e!=null&&e!==""){if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=Ye.decompressFromUTF16(e);else{console.warn("Unable to determine settings encoding",e);return}const t=JSON.parse(e);typeof t=="object"&&Object.assign(xt,t)}ge.emit("loadSettings",xt)}catch{}}const oi=Mt([]);function si(e){oi.push(e)}const li=Mt([]);function ea(e){li.push(e)}const ta=Mt([]),na={class:"table"},Lt=E({__name:"Column",setup(e){const t=N(()=>ze[Z.theme].mergeAdjacent);return(n,i)=>(g(),x("div",na,[p("div",{class:Q(["col",{mergeAdjacent:l(t)}])},[De(n.$slots,"default")],2)]))}}),ia={class:"table"},bt=E({__name:"Row",setup(e){const t=N(()=>ze[Z.theme].mergeAdjacent);return(n,i)=>(g(),x("div",ia,[p("div",{class:Q(["row",{mergeAdjacent:l(t)}])},[De(n.$slots,"default")],2)]))}});function ui(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!cn(e)}function D(e,t="span"){return typeof e=="function"?E({render:e}):typeof e=="string"?e.length>0?(e=e.trim(),e.charAt(0)!=="<"&&(e=`<${t}>${e}</${t}>`),E({template:e})):E({render:()=>({})}):e}function oe(e){if(Te(e))return typeof e=="function"?e():D(e);const t=e[de];return d(t,e[me](),null)}function Pe(...e){let t;return d(bt,null,ui(t=e.map(oe))?t:{default:()=>[t]})}function ra(...e){let t;return d(Lt,null,ui(t=e.map(oe))?t:{default:()=>[t]})}function Re(e){if(Te(e))return typeof e=="function"?e():typeof e=="string"?d(K,null,[e]):d(e,null,null);const t=e[de];return d(t,e[me](),null)}function Te(e){return typeof e=="string"?!0:typeof e=="object"?e==null?!1:"render"in e||"component"in e:typeof e=="function"&&e[wt]===!0}function mn(e,t){const n=O(null),i=O(void 0);function r(s){n.value||(n.value=setInterval(o,250)),i.value=s}function a(){n.value&&(clearInterval(n.value),n.value=null)}function o(){t&&t.value?t.value():e&&e.value&&e.value(i.value)}return Gn(a),{start:r,stop:a,handleHolding:o}}function ct(e,t="div"){const n=xe();return Ne(()=>{n.value=D(ae(e),t)}),n}function it(e,t="div"){const n=xe(null);return Ne(()=>{const i=ae(e);n.value=i==null?null:D(i,t)}),n}function aa(e){return N(()=>ae(e))}function ae(e){return l(l(e))}function k(...e){return e.includes(Object)||e.push(Object),e}const oa=E({__name:"Context",emits:["updateNodes"],setup(e,{emit:t}){var h;const n=O({}),i=new ResizeObserver(s),r=O(null);Tt(()=>{const v=r.value;v!=null&&i.observe(v)});let a=!0,o=O((h=r.value)==null?void 0:h.getBoundingClientRect());function s(){r.value!=null&&a&&(a=!1,Ve(()=>{var v;o.value=(v=r.value)==null?void 0:v.getBoundingClientRect(),Object.values(n.value).filter(b=>b).forEach(b=>b.rect=b.element.getBoundingClientRect()),t("updateNodes",n.value),a=!0}))}document.fonts.ready.then(s);const u={attributes:!1,childList:!0,subtree:!1};Ft(gn,(v,b)=>{const w=new MutationObserver(()=>c(v));w.observe(b,u),n.value[v]={element:b,observer:w,rect:b.getBoundingClientRect()},t("updateNodes",n.value),Ve(()=>c(v))}),Ft(vn,v=>{var b;(b=n.value[v])==null||b.observer.disconnect(),n.value[v]=void 0,t("updateNodes",n.value)}),Ft(hn,n),Ft(bn,o);function c(v){const b=n.value[v];b!=null&&(b.rect=b.element.getBoundingClientRect(),t("updateNodes",n.value))}return(v,b)=>(g(),x(K,null,[De(v.$slots,"default",{},void 0,!0),p("div",{ref_key:"resizeListener",ref:r,class:"resize-listener"},null,512)],64))}});var di=q(oa,[["__scopeId","data-v-6a08ac80"]]);const sa=["onPointerdown"],la={class:"modal-wrapper"},ua={class:"modal-container"},da={class:"modal-header"},ca=C(" default header "),fa={class:"modal-body"},pa=C(" default body "),ma={class:"modal-footer"},ga=p("div",{class:"modal-default-flex-grow"},null,-1),Je=E({__name:"Modal",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const r=ne(e),a=N(()=>r.modelValue||s.value);function o(){n("update:modelValue",!1)}const s=O(!1),u=O(null),c=N(()=>{var h,v;return(v=(h=u.value)==null?void 0:h.nodes)!=null?v:null});return t({isOpen:a,nodes:c}),(h,v)=>(g(),A(Bi,{to:"#modal-root"},[d(Zt,{name:"modal",onBeforeEnter:v[0]||(v[0]=b=>s.value=!0),onAfterLeave:v[1]||(v[1]=b=>s.value=!1)},{default:V(()=>[Kt(p("div",Be({class:"modal-mask",onPointerdown:_t(o,["self"])},h.$attrs),[p("div",la,[p("div",ua,[p("div",da,[De(h.$slots,"header",{shown:l(a)},()=>[ca])]),p("div",fa,[d(di,{ref_key:"contextRef",ref:u},{default:V(()=>[De(h.$slots,"body",{shown:l(a)},()=>[pa])]),_:3},512)]),p("div",ma,[De(h.$slots,"footer",{shown:l(a)},()=>[p("div",{class:"modal-default-footer"},[ga,p("button",{class:"button modal-default-button",onClick:o}," Close ")])])])])])],16,sa),[[Ri,e.modelValue]])]),_:3})]))}}),Nt=Symbol("PersistentState"),St=Symbol("DefaultValue"),Ht=Symbol("StackTrace"),ci=Symbol("Deleted");function va(){var e;return((e=new Error().stack)==null?void 0:e.split(`
`).slice(3,5).map(t=>t.trim()).join(`
`))||""}function ue(e){const t=pe(e)?e:O(e);return t[Nt]=t,t[St]=pe(e)?e.value:e,t[Ht]=va(),t[ci]=!1,Ee.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",t,`
Created at:
`+t[Ht]):dt[Ee[Ee.length-1]].add(t),t}ge.on("addLayer",(e,t)=>{const n=[],i=(r,a=[])=>{let o=!1;return Object.keys(r).forEach(s=>{const u=r[s];if(u&&typeof u=="object")if(Nt in u){if(o=!0,u[ci]){console.warn("Deleted persistent ref present in returned object. Ignoring...",u,`
Created at:
`+u[Ht]);return}dt[e.id].delete(fe in u?u[fe]:u);const c=a.reduce((v,b)=>(b in v||(v[b]={}),v[b]),t),h=c[s];c[s]=u[Nt],qi(c)?h!=null?c[s]=h:c[s]=u[St]:h!=null?c[s].value=h:c[s].value=u[St]}else!(u instanceof f)&&!pe(u)&&!n.includes(u)&&(typeof u.type=="symbol"&&n.push(u),i(u,[...a,s])&&(An(u)&&!An(r)?console.warn("Found array that contains persistent values when adding layer. Keep in mind changing the order of elements in the array will mess with existing player saves.",fe in r?r[fe]:r,s):o=!0))}),o};i(e),dt[e.id].forEach(r=>{console.error(`Created persistent ref in ${e.id} without registering it to the layer! Make sure to include everything persistent in the returned object`,r,`
Created at:
`+r[Ht])}),dt[e.id].clear()});const gn=Symbol("RegisterNode"),vn=Symbol("UnregisterNode"),hn=Symbol("Nodes"),bn=Symbol("Bounds"),_e=Yt({});window.layers=_e;const dt={},Ee=[];function It(e,t){return le(()=>{const n={},i=n.emitter=Wn();if(n.on=i.on.bind(i),n.emit=i.emit.bind(i),n.nodes=O({}),n.id=e,Ee.push(e),dt[e]=new Set,n.minimized=ue(!1),Object.assign(n,t.call(n)),Ee[Ee.length-1]==null||Ee[Ee.length-1]!==e)throw`Adding layers stack in invalid state. This should not happen
Stack: ${Ee}
Trying to pop ${n.id}`;return Ee.pop(),y(n,"color"),y(n,"display"),y(n,"name"),z(n,"name",n.id),y(n,"minWidth"),z(n,"minWidth",600),y(n,"minimizable"),z(n,"minimizable",!0),n})}function fi(e,t){if(console.info("Adding layer",e.id),_e[e.id]){console.error("Attempted to add layer with same ID as existing layer",e.id,_e[e.id]);return}z(t,"layers",{}),t.layers[e.id]==null&&(t.layers[e.id]={}),_e[e.id]=e,ge.emit("addLayer",e,t.layers[e.id])}function ha(e){return _e[e]}function pi(e){console.info("Removing layer",e.id),ge.emit("removeLayer",e),_e[e.id]=void 0}function ba(e){pi(e),fi(e,T)}function mi(e){const t=O(!1);return{openModal:()=>t.value=!0,modal:L(()=>d(Je,{modelValue:t.value,"onUpdate:modelValue":n=>t.value=n},{header:()=>d("h2",null,[l(e.name)]),body:l(e.display)}))}}ge.on("update",function(t){Object.values(_e).forEach(n=>{n==null||n.emit("preUpdate",t)}),Object.values(_e).forEach(n=>{n==null||n.emit("update",t)}),Object.values(_e).forEach(n=>{n==null||n.emit("postUpdate",t)})});var ya=Object.freeze(Object.defineProperty({__proto__:null,RegisterNodeInjectionKey:gn,UnregisterNodeInjectionKey:vn,NodesInjectionKey:hn,BoundsInjectionKey:bn,layers:_e,persistentRefs:dt,addingLayers:Ee,createLayer:It,addLayer:fi,getLayer:ha,removeLayer:pi,reloadLayer:ba,setupLayerModal:mi},Symbol.toStringTag,{value:"Module"}));const _a=E({components:{Context:di},props:{index:{type:Number,required:!0},tab:{type:Function,required:!0},display:{type:k(Object,String,Function),required:!0},minimized:{type:Object,required:!0},minWidth:{type:k(Number,String),required:!0},name:{type:k(String),required:!0},color:k(String),minimizable:k(Boolean),nodes:{type:Object,required:!0}},setup(e){const{display:t,index:n,minimized:i,minWidth:r,tab:a}=ne(e),o=ct(t),s=N(()=>J.allowGoBack&&n.value>0&&!i.value);function u(){T.tabs.splice(l(e.index),1/0)}Ve(()=>h(i.value,l(r.value))),Ie([i,aa(r)],([v,b])=>h(v,b));function c(v){e.nodes.value=v}function h(v,b){const w=typeof b=="number"||Number.isNaN(parseInt(b))?b+"px":b,S=a.value();S!=null&&(v?(S.style.flexGrow="0",S.style.flexShrink="0",S.style.width="60px",S.style.minWidth=S.style.flexBasis="",S.style.margin="0"):(S.style.flexGrow="",S.style.flexShrink="",S.style.width="",S.style.minWidth=S.style.flexBasis=w,S.style.margin=""))}return{component:o,showGoBack:s,updateNodes:c,unref:l,goBack:u}}});function ka(e,t,n,i,r,a){const o=ce("Context");return g(),x("div",{class:"layer-container",style:W({"--layer-color":e.unref(e.color)})},[e.showGoBack?(g(),x("button",{key:0,class:"goBack",onClick:t[0]||(t[0]=(...s)=>e.goBack&&e.goBack(...s))},"\u2190")):P("",!0),e.minimized.value?(g(),x("button",{key:1,class:"layer-tab minimized",onClick:t[1]||(t[1]=s=>e.minimized.value=!1)},[p("div",null,U(e.unref(e.name)),1)])):(g(),x("div",{key:2,class:Q(["layer-tab",{showGoBack:e.showGoBack}])},[d(o,{onUpdateNodes:e.updateNodes},{default:V(()=>[(g(),A(ee(e.component)))]),_:1},8,["onUpdateNodes"])],2)),e.unref(e.minimizable)?(g(),x("button",{key:3,class:"minimize",onClick:t[2]||(t[2]=s=>e.minimized.value=!0)}," \u25BC ")):P("",!0)],4)}var wa=q(_a,[["render",ka],["__scopeId","data-v-34c9d881"]]);const gi=e=>(qe("data-v-4b4bda40"),e=e(),Le(),e),xa=gi(()=>p("h2",null,"Changelog",-1)),Na=gi(()=>p("details",{open:""},[p("summary",null,[C("v0.0 Initial Commit - "),p("time",null,"2021-09-04")]),C(" This is the first release :D "),p("ul",null,[p("li",{class:"feature"},"Did everything"),p("li",{class:"fix"},"Had some fun"),p("li",{class:"breaking"},"Removed everything"),p("li",{class:"balancing"},"Created some bugs to fix later")])],-1)),Sa=E({__name:"Changelog",setup(e,{expose:t}){const n=O(!1);return t({open(){n.value=!0}}),(i,r)=>(g(),A(Je,{modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=a=>n.value=a)},{header:V(()=>[xa]),body:V(()=>[Na]),_:1},8,["modelValue"]))}});var Ca=q(Sa,[["__scopeId","data-v-4b4bda40"]]),$a=E({props:{element:Object,display:{type:k(Object,String,Function),required:!0},style:k(Object,String,Array),classes:k(Object),direction:k(String),xoffset:k(String),yoffset:k(String),pinned:Object},setup(e){const{element:t,display:n,pinned:i}=ne(e),r=O(!1),a=N(()=>(ae(i)||r.value)&&o.value),o=it(n),s=xe(D(L(()=>{const h=ae(t);return h==null?"":Re(h)})));function u(h){const v=i;h.shiftKey&&v&&(v.value=!v.value,h.stopPropagation(),h.preventDefault())}const c=N(()=>ae(i)&&ze[Z.theme].showPin);return{Direction:X,isHovered:r,isShown:a,comp:o,elementComp:s,unref:l,togglePinned:u,showPin:c}}});const Ma={key:0,class:"material-icons pinned"};function Ta(e,t,n,i,r,a){return g(),x("div",{class:Q(["tooltip-container",{shown:e.isShown}]),onMouseenter:t[0]||(t[0]=o=>e.isHovered=!0),onMouseleave:t[1]||(t[1]=o=>e.isHovered=!1),onClickCapture:t[2]||(t[2]=(...o)=>e.togglePinned&&e.togglePinned(...o))},[De(e.$slots,"default",{},void 0,!0),e.elementComp?(g(),A(ee(e.elementComp),{key:0})):P("",!0),d(Zt,{name:"fade"},{default:V(()=>{var o;return[e.isShown?(g(),x("div",{key:0,class:Q(["tooltip",{top:e.unref(e.direction)===e.Direction.Up,left:e.unref(e.direction)===e.Direction.Left,right:e.unref(e.direction)===e.Direction.Right,bottom:e.unref(e.direction)===e.Direction.Down,...e.unref(e.classes)}]),style:W([{"--xoffset":e.unref(e.xoffset)||"0px","--yoffset":e.unref(e.yoffset)||"0px"},(o=e.unref(e.style))!=null?o:{}])},[e.showPin?(g(),x("span",Ma,"push_pin")):P("",!0),e.comp?(g(),A(ee(e.comp),{key:1})):P("",!0)],6)):P("",!0)]}),_:1})],34)}var re=q($a,[["render",Ta],["__scopeId","data-v-6102fa3a"]]);const rt=e=>(qe("data-v-7dec2dec"),e=e(),Le(),e),Ia={class:"info-modal-header"},Pa=["src","alt"],Oa={class:"info-modal-title"},Aa={key:0},Ea={key:0},Va={key:0},Fa=rt(()=>p("div",null," Made in Profectus, by thepaperpilot with inspiration from Acameada and Jacorb ",-1)),Da=rt(()=>p("br",null,null,-1)),Ra=rt(()=>p("br",null,null,-1)),Ba=["href"],qa=rt(()=>p("span",{class:"material-icons info-modal-discord"},"discord",-1)),La=rt(()=>p("div",null,[p("a",{href:"https://discord.gg/WzejVAx",class:"info-modal-discord-link"},[p("span",{class:"material-icons info-modal-discord"},"discord"),C(" The Paper Pilot Community ")])],-1)),ja=rt(()=>p("div",null,[p("a",{href:"https://discord.gg/F3xveHV",class:"info-modal-discord-link"},[p("span",{class:"material-icons info-modal-discord"},"discord"),C(" The Modding Tree ")])],-1)),za=rt(()=>p("br",null,null,-1));var Ua=E({__name:"Info",props:{changelog:null},setup(e,{expose:t}){const n=e,{title:i,logo:r,author:a,discordName:o,discordLink:s,versionNumber:u,versionTitle:c}=J,h=ne(n),v=O(!1),b=N(()=>Jt(T.timePlayed)),w=N(()=>D(L(()=>d(K,null,[li.map(oe)]))));t({open(){v.value=!0}});function S(){var $;($=l(h.changelog))==null||$.open()}return($,R)=>(g(),A(Je,{modelValue:v.value,"onUpdate:modelValue":R[0]||(R[0]=ke=>v.value=ke)},{header:V(()=>[p("div",Ia,[l(r)?(g(),x("img",{key:0,class:"info-modal-logo",src:l(r),alt:l(i)},null,8,Pa)):P("",!0),p("div",Oa,[p("h2",null,U(l(i)),1),p("h4",null,[C(" v"+U(l(u)),1),l(c)?(g(),x("span",Aa,": "+U(l(c)),1)):P("",!0)])])])]),body:V(({shown:ke})=>[ke?(g(),x("div",Ea,[l(a)?(g(),x("div",Va,"By "+U(l(a)),1)):P("",!0),Fa,Da,p("div",{class:"link",onClick:S},"Changelog"),Ra,p("div",null,[l(s)?(g(),x("a",{key:0,href:l(s),class:"info-modal-discord-link"},[qa,C(" "+U(l(o)),1)],8,Ba)):P("",!0)]),La,ja,za,p("div",null,"Time Played: "+U(l(b)),1),(g(),A(ee(l(w))))])):P("",!0)]),_:1},8,["modelValue"]))}});var Ga=q(Ua,[["__scopeId","data-v-7dec2dec"]]);const Ha={class:"field"},Wa={key:0,class:"field-title"},yn=E({__name:"Select",props:{title:null,modelValue:null,options:null,placeholder:null,closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){var o;const n=e,i=it(Ze(n,"title"),"span"),r=O((o=n.options.find(s=>s.value===n.modelValue))!=null?o:null);Ie(Ze(n,"modelValue"),s=>{var u;ae(r)!==s&&(r.value=(u=n.options.find(c=>c.value===s))!=null?u:null)});function a(s){t("update:modelValue",s.value)}return(s,u)=>(g(),x("div",Ha,[l(i)?(g(),x("span",Wa,[(g(),A(ee(l(i))))])):P("",!0),d(l(Wi),{options:e.options,modelValue:r.value,"onUpdate:modelValue":[u[0]||(u[0]=c=>r.value=c),a],min:1,"label-by":"label",placeholder:e.placeholder,"close-on-select":e.closeOnSelect},null,8,["options","modelValue","placeholder","close-on-select"])]))}});const Ya={class:"field"},Ka=E({__name:"Toggle",props:{title:null,modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,i=N(()=>D(l(n.title)||"<span></span>","span")),r=N({get(){return!!n.modelValue},set(a){t("update:modelValue",a)}});return(a,o)=>(g(),x("label",Ya,[Kt(p("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":o[0]||(o[0]=s=>pe(r)?r.value=s:null)},null,512),[[Li,l(r)]]),(g(),A(ee(l(i))))]))}});var we=q(Ka,[["__scopeId","data-v-2b109500"]]);const vi=e=>(qe("data-v-bc13791c"),e=e(),Le(),e),Za=vi(()=>p("div",{class:"header"},[p("h2",null,"Options")],-1)),Ja=vi(()=>p("hr",null,null,-1));var Xa=E({__name:"Options",setup(e,{expose:t}){const n=O(!1);t({open(){n.value=!0}});const i=Object.keys(ze).map(S=>({label:ei(S),value:S})),r=N(()=>D(L(()=>d(K,null,[oi.map(oe)])))),{showTPS:a,theme:o,unthrottled:s}=ne(Z),{autosave:u,offlineProd:c}=ne(T),h=N({get(){return T.devSpeed===0},set(S){T.devSpeed=S?0:null}}),v=L(()=>d("span",null,[C("Offline Production"),d(re,{display:"Save-specific"},{default:()=>[C("*")]})])),b=L(()=>d("span",null,[C("Autosave"),d(re,{display:"Save-specific"},{default:()=>[C("*")]})])),w=L(()=>d("span",null,[C("Pause game"),d(re,{display:"Save-specific"},{default:()=>[C("*")]})]));return(S,$)=>(g(),A(Je,{modelValue:n.value,"onUpdate:modelValue":$[6]||($[6]=R=>n.value=R)},{header:V(()=>[Za]),body:V(()=>[d(yn,{title:"Theme",options:l(i),modelValue:l(o),"onUpdate:modelValue":$[0]||($[0]=R=>pe(o)?o.value=R:null)},null,8,["options","modelValue"]),(g(),A(ee(l(r)))),d(we,{title:"Show TPS",modelValue:l(a),"onUpdate:modelValue":$[1]||($[1]=R=>pe(a)?a.value=R:null)},null,8,["modelValue"]),Ja,d(we,{title:"Unthrottled",modelValue:l(s),"onUpdate:modelValue":$[2]||($[2]=R=>pe(s)?s.value=R:null)},null,8,["modelValue"]),d(we,{title:l(v),modelValue:l(c),"onUpdate:modelValue":$[3]||($[3]=R=>pe(c)?c.value=R:null)},null,8,["title","modelValue"]),d(we,{title:l(b),modelValue:l(u),"onUpdate:modelValue":$[4]||($[4]=R=>pe(u)?u.value=R:null)},null,8,["title","modelValue"]),l(J).enablePausing?(g(),A(we,{key:0,title:l(w),modelValue:l(h),"onUpdate:modelValue":$[5]||($[5]=R=>pe(h)?h.value=R:null)},null,8,["title","modelValue"])):P("",!0)]),_:1},8,["modelValue"]))}});var Qa=q(Xa,[["__scopeId","data-v-bc13791c"]]);const eo=["onSubmit"],to={class:"field"},no={key:0,class:"field-title"},io=["placeholder"],ro=E({__name:"Text",props:{title:null,modelValue:null,textArea:{type:Boolean},placeholder:null,maxHeight:null},emits:["update:modelValue","submit"],setup(e,{emit:t}){const i=ne(e),r=N(()=>{var u;return((u=i.title)==null?void 0:u.value)&&D(l(i.title.value),"span")}),a=O(null);Tt(()=>{var u;(u=a.value)==null||u.focus()});const o=N({get(){return l(i.modelValue)||""},set(u){t("update:modelValue",u)}});function s(){t("submit")}return(u,c)=>(g(),x("form",{onSubmit:_t(s,["prevent"])},[p("div",to,[l(r)?(g(),x("span",no,[(g(),A(ee(l(r))))])):P("",!0),e.textArea?(g(),A(l(Ki),{key:1,modelValue:l(o),"onUpdate:modelValue":c[0]||(c[0]=h=>pe(o)?o.value=h:null),placeholder:e.placeholder,maxHeight:e.maxHeight,onBlur:s,ref_key:"field",ref:a},null,8,["modelValue","placeholder","maxHeight"])):Kt((g(),x("input",{key:2,type:"text","onUpdate:modelValue":c[1]||(c[1]=h=>pe(o)?o.value=h:null),placeholder:e.placeholder,class:Q({fullWidth:!e.title}),onBlur:s,ref_key:"field",ref:a},null,42,io)),[[Hn,l(o)]])])],40,eo))}});var _n=q(ro,[["__scopeId","data-v-d74adb0a"]]);const ao={key:0},oo=["onClick","disabled"],so={key:0},lo=["onClick"],uo=E({__name:"DangerButton",props:{disabled:{type:Boolean},skipConfirm:{type:Boolean}},emits:["click","confirmingChanged"],setup(e,{emit:t}){const i=ne(e),r=O(!1);Ie(r,s=>{t("confirmingChanged",s)});function a(){if(l(i.skipConfirm)){t("click");return}r.value&&t("click"),r.value=!r.value}function o(){r.value=!1}return(s,u)=>(g(),x("span",{class:Q(["container",{confirming:r.value}])},[r.value?(g(),x("span",ao,"Are you sure?")):P("",!0),p("button",{onClick:_t(a,["stop"]),class:"button danger",disabled:e.disabled},[r.value?(g(),x("span",so,"Yes")):De(s.$slots,"default",{key:1},void 0,!0)],8,oo),r.value?(g(),x("button",{key:1,class:"button",onClick:_t(o,["stop"])},"No",8,lo)):P("",!0)],2))}});var co=q(uo,[["__scopeId","data-v-2f8ef34c"]]);const fo=["onClick"],po=E({__name:"FeedbackButton",props:{left:{type:Boolean}},emits:["click"],setup(e,{emit:t}){const n=O(!1),i=O(null);function r(){t("click"),i.value&&clearTimeout(i.value),n.value=!1,Ve(()=>{n.value=!0,i.value=setTimeout(()=>n.value=!1,500)})}return(a,o)=>(g(),x("button",{onClick:_t(r,["stop"]),class:Q(["feedback",{activated:n.value,left:e.left}])},[De(a.$slots,"default",{},void 0,!0)],10,fo))}});var mo=q(po,[["__scopeId","data-v-01a1b95c"]]);const Ue=e=>(qe("data-v-0136bef4"),e=e(),Le(),e),go=Ue(()=>p("div",{class:"handle material-icons"},"drag_handle",-1)),vo={key:0,class:"actions"},ho=Ue(()=>p("span",{class:"material-icons"},"content_paste",-1)),bo=Ue(()=>p("span",{class:"material-icons"},"content_copy",-1)),yo=Ue(()=>p("span",{class:"material-icons"},"edit",-1)),_o=Ue(()=>p("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)),ko={key:1,class:"actions"},wo=Ue(()=>p("span",{class:"material-icons"},"check",-1)),xo=Ue(()=>p("span",{class:"material-icons"},"close",-1)),No={key:2,class:"details"},So={class:"save-version"},Co=Ue(()=>p("br",null,null,-1)),$o={key:0},Mo={key:3,class:"details"},To={key:4,class:"details error"},Io=Ue(()=>p("br",null,null,-1)),Po=E({__name:"Save",props:{save:null},emits:["export","open","duplicate","delete","editName"],setup(e,{emit:t}){const n=e,{save:i}=ne(n),r=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),a=O(!1),o=O(!1),s=O("");Ie(a,()=>s.value=i.value.name||"");const u=N(()=>i.value&&i.value.id===T.id),c=N(()=>u.value?T.time:i.value&&i.value.time||0);function h(){t("editName",s.value),a.value=!1}return(v,b)=>(g(),x("div",{class:Q(["save",{active:l(u)}])},[go,a.value?(g(),x("div",ko,[p("button",{onClick:h,class:"button"},[d(re,{display:"Save",direction:l(X).Left,class:"info"},{default:V(()=>[wo]),_:1},8,["direction"])]),p("button",{onClick:b[5]||(b[5]=w=>a.value=!a.value),class:"button"},[d(re,{display:"Cancel",direction:l(X).Left,class:"info"},{default:V(()=>[xo]),_:1},8,["direction"])])])):(g(),x("div",vo,[l(i).error==null&&!o.value?(g(),A(mo,{key:0,onClick:b[0]||(b[0]=w=>t("export")),class:"button",left:""},{default:V(()=>[d(re,{display:"Export",direction:l(X).Left,class:"info"},{default:V(()=>[ho]),_:1},8,["direction"])]),_:1})):P("",!0),l(i).error==null&&!o.value?(g(),x("button",{key:1,onClick:b[1]||(b[1]=w=>t("duplicate")),class:"button"},[d(re,{display:"Duplicate",direction:l(X).Left,class:"info"},{default:V(()=>[bo]),_:1},8,["direction"])])):P("",!0),l(i).error==null&&!o.value?(g(),x("button",{key:2,onClick:b[2]||(b[2]=w=>a.value=!a.value),class:"button"},[d(re,{display:"Edit Name",direction:l(X).Left,class:"info"},{default:V(()=>[yo]),_:1},8,["direction"])])):P("",!0),d(co,{disabled:l(u),onClick:b[3]||(b[3]=w=>t("delete")),onConfirmingChanged:b[4]||(b[4]=w=>o.value=w)},{default:V(()=>[d(re,{display:"Delete",direction:l(X).Left,class:"info"},{default:V(()=>[_o]),_:1},8,["direction"])]),_:1},8,["disabled"])])),l(i).error==null&&!a.value?(g(),x("div",No,[p("button",{class:"button open",onClick:b[6]||(b[6]=w=>t("open"))},[p("h3",null,U(l(i).name),1)]),p("span",So,"v"+U(l(i).modVersion),1),Co,l(c)?(g(),x("div",$o,"Last played "+U(l(r).format(l(c))),1)):P("",!0)])):l(i).error==null&&a.value?(g(),x("div",Mo,[d(_n,{modelValue:s.value,"onUpdate:modelValue":b[7]||(b[7]=w=>s.value=w),class:"editname",onSubmit:h},null,8,["modelValue"])])):(g(),x("div",To,[C(" Error: Failed to load save with id "+U(l(i).id),1),Io,C(U(l(i).error),1)]))],2))}});var Oo=q(Po,[["__scopeId","data-v-0136bef4"]]);const kn=e=>(qe("data-v-3b9991aa"),e=e(),Le(),e),Ao=kn(()=>p("h2",null,"Saves Manager",-1)),Eo={class:"modal-footer"},Vo={class:"field"},Fo=kn(()=>p("span",{class:"field-title"},"Create Save",-1)),Do={class:"field-buttons"},Ro={class:"footer"},Bo=kn(()=>p("div",{style:{"flex-grow":"1"}},null,-1)),qo=E({__name:"SavesManager",setup(e,{expose:t}){const n=O(!1),i=O(null);t({open(){n.value=!0}});const r=O(!1),a=O(""),o=O(null);Ie(a,M=>{M?Ve(()=>{try{if(M[0]!=="{")if(M[0]==="e")M=decodeURIComponent(escape(atob(M)));else if(M[0]==="\u1BE1")M=Ye.decompressFromUTF16(M);else{console.warn("Unable to determine preset encoding",M),r.value=!0;return}const I=JSON.parse(M);if(typeof I!="object"){r.value=!0;return}const G=qt();I.id=G,Ae(I),a.value="",r.value=!1,Z.saves.push(G)}catch{r.value=!0}}):r.value=!1});let s={},u=O(Object.keys(s).reduce((M,I)=>(M.push({label:I.split("/").slice(-1)[0].slice(0,-4),value:s[I]}),M),[]));const c=Yt({});function h(M){if(c[M]==null){let I=localStorage.getItem(M);if(I==null)c[M]={error:"Save doesn't exist in localStorage",id:M};else if(I==="dW5kZWZpbmVk")c[M]={error:"Save is undefined",id:M};else try{if(I[0]!=="{")if(I[0]==="e")I=decodeURIComponent(escape(atob(I)));else if(I[0]==="\u1BE1")I=Ye.decompressFromUTF16(I);else return console.warn("Unable to determine preset encoding",I),r.value=!0,c[M]={error:"Unable to determine preset encoding",id:M},c[M];c[M]={...JSON.parse(I),id:M}}catch(G){c[M]={error:G,id:M},console.warn(`SavesManager: Failed to load info about save with id ${M}:
${G}
${I}`)}}return c[M]}Ie(n,M=>{M&&Object.keys(c).forEach(I=>delete c[I])});const v=N(()=>Z.saves.reduce((M,I)=>(M[I]=h(I),M),{}));function b(M){let I;switch(T.id===M?I=ii(T[fe]):I=JSON.stringify(v.value[M]),J.exportEncoding){default:console.warn(`Unknown save encoding: ${J.exportEncoding}. Defaulting to lz`);case"lz":I=Ye.compressToUTF16(I);break;case"base64":I=btoa(unescape(encodeURIComponent(I)));break;case"plain":break}const G=document.createElement("textarea");G.value=I,document.body.appendChild(G),G.select(),G.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(G)}function w(M){T.id===M&&Ae();const I={...v.value[M],id:qt()};Ae(I),Z.saves.push(I.id)}function S(M){Z.saves=Z.saves.filter(I=>I!==M),localStorage.removeItem(M),c[M]=void 0}function $(M){v.value[T.id].time=T.time,Ae(),c[T.id]=void 0,nt(v.value[M]),c[M]=void 0}function R(M){if(o.value=M,Ve(()=>{o.value=null}),M[0]!=="{")if(M[0]==="e")M=decodeURIComponent(escape(atob(M)));else if(M[0]==="\u1BE1")M=Ye.decompressFromUTF16(M);else{console.warn("Unable to determine preset encoding",M);return}const I=JSON.parse(M);I.id=qt(),Ae(I),Z.saves.push(I.id),$(I.id)}function ke(M,I){const G=v.value[M];G&&(G.name=I,T.id===M?(T.name=I,Ae()):(Ae(G),c[M]=void 0))}return(M,I)=>(g(),A(Je,{modelValue:n.value,"onUpdate:modelValue":I[4]||(I[4]=G=>n.value=G),ref_key:"modal",ref:i},{header:V(()=>[Ao]),body:V(({shown:G})=>[G?(g(),A(l(Yi),{key:0,list:l(Z).saves,handle:".handle",itemKey:be=>be},{item:V(({element:be})=>[d(Oo,{save:l(v)[be],onOpen:te=>$(be),onExport:te=>b(be),onEditName:te=>ke(be,te),onDuplicate:te=>w(be),onDelete:te=>S(be)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):P("",!0)]),footer:V(()=>[p("div",Eo,[d(_n,{modelValue:a.value,"onUpdate:modelValue":I[0]||(I[0]=G=>a.value=G),title:"Import Save",placeholder:"Paste your save here!",class:Q({importingFailed:r.value})},null,8,["modelValue","class"]),p("div",Vo,[Fo,p("div",Do,[p("button",{class:"button",onClick:I[1]||(I[1]=G=>$(l(ut)().id))},"New Game"),Object.keys(l(u)).length>0?(g(),A(yn,{key:0,options:l(u),modelValue:o.value,"onUpdate:modelValue":I[2]||(I[2]=G=>R(G)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):P("",!0)])]),p("div",Ro,[Bo,p("button",{class:"button modal-default-button",onClick:I[3]||(I[3]=G=>n.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}});var hi=q(qo,[["__scopeId","data-v-3b9991aa"]]);const Se=e=>(qe("data-v-4a3f8425"),e=e(),Le(),e),Lo=["src","alt"],jo={key:1,class:"title"},zo=Se(()=>p("div",{style:{"flex-grow":"1",cursor:"unset"}},null,-1)),Uo={class:"discord"},Go={class:"discord-links"},Ho={key:0},Wo=["href"],Yo=Se(()=>p("li",null,[p("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),Ko=Se(()=>p("li",null,[p("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),Zo={href:"https://forums.moddingtree.com/",target:"_blank"},Jo=Se(()=>p("span",{class:"material-icons"},"forum",-1)),Xo=Se(()=>p("span",{class:"material-icons"},"info",-1)),Qo=Se(()=>p("span",{class:"material-icons"},"library_books",-1)),es=Se(()=>p("span",{class:"material-icons"},"settings",-1)),ts=Se(()=>p("span",{class:"material-icons"},"library_books",-1)),ns=Se(()=>p("span",{class:"material-icons"},"settings",-1)),is=Se(()=>p("span",{class:"material-icons"},"info",-1)),rs={href:"https://forums.moddingtree.com/",target:"_blank"},as=Se(()=>p("span",{class:"material-icons"},"forum",-1)),os={class:"discord"},ss={class:"discord-links"},ls={key:0},us=["href"],ds=Se(()=>p("li",null,[p("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),cs=Se(()=>p("li",null,[p("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),fs=E({__name:"Nav",setup(e){const t=O(null),n=O(null),i=O(null),r=O(null),{useHeader:a,banner:o,title:s,discordName:u,discordLink:c,versionNumber:h}=J;function v(){window.open(c,"mywindow")}return(b,w)=>(g(),x(K,null,[l(a)?(g(),x("div",Be({key:0,class:"nav"},b.$attrs),[l(o)?(g(),x("img",{key:0,src:l(o),class:"banner",alt:l(s)},null,8,Lo)):(g(),x("div",jo,U(l(s)),1)),p("div",{onClick:w[0]||(w[0]=S=>{var $;return($=r.value)==null?void 0:$.open()}),class:"version-container"},[d(re,{display:"Changelog",direction:l(X).Down,class:"version"},{default:V(()=>[p("span",null,"v"+U(l(h)),1)]),_:1},8,["direction"])]),zo,p("div",Uo,[p("span",{onClick:v,class:"material-icons"},"discord"),p("ul",Go,[l(c)?(g(),x("li",Ho,[p("a",{href:l(c),target:"_blank"},U(l(u)),9,Wo)])):P("",!0),Yo,Ko])]),p("div",null,[p("a",Zo,[d(re,{display:"Forums",direction:l(X).Down,yoffset:"5px"},{default:V(()=>[Jo]),_:1},8,["direction"])])]),p("div",{onClick:w[1]||(w[1]=S=>{var $;return($=t.value)==null?void 0:$.open()})},[d(re,{display:"Info",direction:l(X).Down,class:"info"},{default:V(()=>[Xo]),_:1},8,["direction"])]),p("div",{onClick:w[2]||(w[2]=S=>{var $;return($=n.value)==null?void 0:$.open()})},[d(re,{display:"Saves",direction:l(X).Down,xoffset:"-20px"},{default:V(()=>[Qo]),_:1},8,["direction"])]),p("div",{onClick:w[3]||(w[3]=S=>{var $;return($=i.value)==null?void 0:$.open()})},[d(re,{display:"Options",direction:l(X).Down,xoffset:"-66px"},{default:V(()=>[es]),_:1},8,["direction"])])],16)):(g(),x("div",Be({key:1,class:"overlay-nav"},b.$attrs),[p("div",{onClick:w[4]||(w[4]=S=>{var $;return($=r.value)==null?void 0:$.open()}),class:"version-container"},[d(re,{display:"Changelog",direction:l(X).Right,xoffset:"25%",class:"version"},{default:V(()=>[p("span",null,"v"+U(l(h)),1)]),_:1},8,["direction"])]),p("div",{onClick:w[5]||(w[5]=S=>{var $;return($=n.value)==null?void 0:$.open()})},[d(re,{display:"Saves",direction:l(X).Right},{default:V(()=>[ts]),_:1},8,["direction"])]),p("div",{onClick:w[6]||(w[6]=S=>{var $;return($=i.value)==null?void 0:$.open()})},[d(re,{display:"Options",direction:l(X).Right},{default:V(()=>[ns]),_:1},8,["direction"])]),p("div",{onClick:w[7]||(w[7]=S=>{var $;return($=t.value)==null?void 0:$.open()})},[d(re,{display:"Info",direction:l(X).Right},{default:V(()=>[is]),_:1},8,["direction"])]),p("div",null,[p("a",rs,[d(re,{display:"Forums",direction:l(X).Right,xoffset:"7px"},{default:V(()=>[as]),_:1},8,["direction"])])]),p("div",os,[p("span",{onClick:v,class:"material-icons"},"discord"),p("ul",ss,[l(c)?(g(),x("li",ls,[p("a",{href:l(c),target:"_blank"},U(l(u)),9,us)])):P("",!0),ds,cs])])],16)),d(Ga,{ref_key:"info",ref:t,changelog:r.value},null,8,["changelog"]),d(hi,{ref_key:"savesManager",ref:n},null,512),d(Qa,{ref_key:"options",ref:i},null,512),d(Ca,{ref_key:"changelog",ref:r},null,512)],64))}});var bi=q(fs,[["__scopeId","data-v-4a3f8425"]]);const ps={class:"inner-tab"},ms=E({__name:"Game",setup(e){const t=Ze(T,"tabs"),n=N(()=>Object.keys(_e)),i=J.useHeader;function r(a){const{display:o,minimized:s,minWidth:u,name:c,color:h,minimizable:v,nodes:b}=a;return{display:o,minimized:s,minWidth:u,name:c,color:h,minimizable:v,nodes:b}}return(a,o)=>(g(),x("div",{class:Q(["tabs-container",{useHeader:l(i)}])},[(g(!0),x(K,null,kt(l(t),(s,u)=>{var c,h;return g(),x("div",{key:u,class:Q(["tab",l((c=l(_e)[s])==null?void 0:c.classes)]),ref_for:!0,ref:`tab-${u}`,style:W(l((h=l(_e)[s])==null?void 0:h.style))},[u===0&&!l(i)?(g(),A(bi,{key:0})):P("",!0),p("div",ps,[l(n).includes(s)?(g(),A(wa,Be({key:0},r(l(_e)[s]),{index:u,tab:()=>{var v;return(v=a.$refs[`tab-${u}`])==null?void 0:v[0]}}),null,16,["index","tab"])):(g(),A(ee(s),{key:1,index:u},null,8,["index"]))])],6)}),128))],2))}});var gs=q(ms,[["__scopeId","data-v-4cb9ce0f"]]);const vs={},hs=e=>(qe("data-v-89b4b00a"),e=e(),Le(),e),bs=hs(()=>p("svg",{id:"eaRe02fYmMp1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 228 521","shape-rendering":"geometricPrecision","text-rendering":"geometricPrecision"},[p("g",{id:"P"},[p("path",{d:"m 101,512.877 c -17.547386,-5.3519 -50.794681,-10.26296 -80,0 10.737201,-217.43031 5.7244,-300.999 0,-464.9995 0,0 46.6144,-37.1164 80,-42.00002 33.386,-4.883633 86.025,10.45942 120,50.00002 5,30 -4.353,106.6565 -44,156.0005 -34.149,42.5 -130,38.48 -130,92.999 0,102 54,208 54,208 z",style:{display:"inline",fill:"none",stroke:"rgb(163, 190, 140)","stroke-width":"10","stroke-linecap":"round","stroke-miterlimit":"16"},id:"trunk",class:"svg-elem-1"}),p("path",{d:"M 221,55.8775 C 209.023,126.453 185.39,166.835 158.997,191.5 93.783098,252.444 11.718998,217.436 46.999998,304.877",style:{display:"inline",fill:"none",stroke:"rgb(163, 190, 140)","stroke-width":"5","stroke-linecap":"round","stroke-miterlimit":"16"},id:"vine2",class:"svg-elem-2"}),p("path",{d:"m 194.5,188 c -11.225,4.447 -19.066,5.134 -35.503,3.5",style:{display:"inline",fill:"none",stroke:"rgb(163, 190, 140)","stroke-width":"5","stroke-linecap":"round","stroke-miterlimit":"16"},id:"short_vine4",class:"svg-elem-3"}),p("path",{d:"M 73.499996,246.5 C 111.145,245.626 127.011,238.775 156.5,228",style:{display:"inline",fill:"none",stroke:"rgb(163, 190, 140)","stroke-width":"5","stroke-linecap":"round","stroke-miterlimit":"16"},id:"short_vine3",class:"svg-elem-4"}),p("path",{d:"M 221,55.8775 C 169.5,17.8262 86.0943,44.9468 47,107 c -4.743,7.528 -7.1041,15.373 -8.326,24 -3.5282,24.91 2.4426,56.34 -12.0011,105.5",style:{display:"inline",fill:"none",stroke:"rgb(163, 190, 140)","stroke-width":"5","stroke-linecap":"round","stroke-miterlimit":"16"},id:"vine1",class:"svg-elem-5"}),p("path",{d:"M 21,47.8775 38.674,131",style:{display:"inline",fill:"none",stroke:"rgb(163, 190, 140)","stroke-width":"5","stroke-linecap":"round","stroke-miterlimit":"16"},id:"short_vine2",class:"svg-elem-6"}),p("path",{d:"m 3,326.5 c 13.1783,22.208 16.4863,42.834 21.6997,81",style:{display:"inline",fill:"none",stroke:"rgb(163, 190, 140)","stroke-width":"5","stroke-linecap":"round","stroke-miterlimit":"16"},id:"short_vine1",class:"svg-elem-7"})])],-1));function ys(e,t){return g(),A(Zt,{appear:""},{default:V(()=>[bs]),_:1})}var _s=q(vs,[["render",ys],["__scopeId","data-v-89b4b00a"]]);const ye=E({__name:"Spacer",props:{width:{default:"8px"},height:{default:"17px"}},setup(e){return(t,n)=>(g(),x("div",{style:W({width:e.width,height:e.height})},null,4))}});function Ct(e,t="points",n=0,i=void 0){const r=pe(e)?e:ue(e);return r.displayName=t,r.precision=n,r.small=i,r}function yi(e){const t=ue(e.value);return Ie(e,n=>{f.gt(n,t.value)&&(t.value=n)}),t}function ks(e){const t=ue(e.value);return Ie(e,(n,i)=>{f.gt(n,i)&&(t.value=f.add(t.value,f.sub(n,i)))}),t}const ws=new f("10^^8"),xs=new f("1e100");function Ns(e,t){const n=O(0),i=O(0),r=O(0);return ge.on("update",o=>{if(i.value=0,f.lte(e.value,xs)){r.value=e.value;return}let s=e.value,u=r.value;if(r.value=s,f.gt(s,u))if(f.gte(s,ws))s=f.slog(s,1e10),u=f.slog(u,1e10),n.value=s.sub(u).div(o),i.value=-1;else for(;f.div(s,u).log(10).div(o).gte("100")&&i.value<=5&&f.gt(u,0);)s=f.log10(s),u=f.log10(u),n.value=s.sub(u).div(o),i.value++}),N(()=>i.value===0?t?se(t.value,e.precision,e.small)+" "+e.displayName+"/s":"":se(n.value)+" OOM"+(i.value<0?"^OOM":"^"+i.value)+"s/sec")}function je(e,t){const n=t!=null?t:e.value;return f.eq(e.precision,0)?ve(n):se(n,e.precision,e.small)}const Ss=["x1","y1","x2","y2"],Cs=E({__name:"Link",props:{link:null,startNode:null,endNode:null,boundingRect:null},setup(e){const n=ne(e),i=N(()=>{const a=n.startNode.value.rect,o=n.boundingRect.value,s=o?{x:a.x+a.width/2-o.x,y:a.y+a.height/2-o.y}:{x:0,y:0};return n.link.value.offsetStart&&(s.x+=n.link.value.offsetStart.x,s.y+=n.link.value.offsetStart.y),s}),r=N(()=>{const a=n.endNode.value.rect,o=n.boundingRect.value,s=o?{x:a.x+a.width/2-o.x,y:a.y+a.height/2-o.y}:{x:0,y:0};return n.link.value.offsetEnd&&(s.x+=n.link.value.offsetEnd.x,s.y+=n.link.value.offsetEnd.y),s});return(a,o)=>(g(),x("line",Be({"stroke-width":"15px",stroke:"white"},e.link,{x1:l(i).x,y1:l(i).y,x2:l(r).x,y2:l(r).y}),null,16,Ss))}});const $s=E({__name:"Links",props:{links:null},setup(e){var u;const n=Ze(e,"links"),i=O(null),r=jt(hn,O({})),a=jt(bn,O(void 0)),o=O((u=i.value)==null?void 0:u.getBoundingClientRect());Ie(a,()=>{var c;return o.value=(c=i.value)==null?void 0:c.getBoundingClientRect()}),Tt(()=>{var c;return o.value=(c=i.value)==null?void 0:c.getBoundingClientRect()});const s=N(()=>{var h,v;const c=r.value;return(v=(h=n.value)==null?void 0:h.filter(b=>{var w,S;return((w=c[b.startNode.id])==null?void 0:w.rect)&&((S=c[b.startNode.id])==null?void 0:S.rect)}))!=null?v:[]});return(c,h)=>(g(),x(K,null,[l(s)?(g(),x("svg",ji(Be({key:0},c.$attrs)),[(g(!0),x(K,null,kt(l(s),(v,b)=>(g(),A(Cs,{key:b,link:v,boundingRect:o.value,startNode:l(r)[v.startNode.id],endNode:l(r)[v.endNode.id]},null,8,["link","boundingRect","startNode","endNode"]))),128))],16)):P("",!0),p("div",{ref_key:"resizeListener",ref:i,class:"resize-listener"},null,512)],64))}});var _i=q($s,[["__scopeId","data-v-c139d80e"]]),Ms=E({props:{nodes:{type:k(Array),required:!0},leftSideNodes:k(Array),rightSideNodes:k(Array),branches:k(Array)},components:{Links:_i},setup(e){const{nodes:t,leftSideNodes:n,rightSideNodes:i}=ne(e),r=xe();Ne(()=>{const s=ae(t);r.value=D(L(()=>d(K,null,[s.map(u=>d("span",{class:"row tree-row",style:"margin: 50px auto;"},[u.map(Re)]))])))});const a=xe();Ne(()=>{const s=ae(n);a.value=s?D(L(()=>d("span",{class:"left-side-nodes small"},[s.map(Re)]))):""});const o=xe();return Ne(()=>{const s=ae(i);o.value=s?D(L(()=>d("span",{class:"side-nodes small"},[s.map(Re)]))):""}),{unref:l,nodesComp:r,leftNodesComp:a,rightNodesComp:o}}});function Ts(e,t,n,i,r,a){const o=ce("Links");return g(),x(K,null,[(g(),A(ee(e.nodesComp))),e.leftNodesComp?(g(),A(ee(e.leftNodesComp),{key:0})):P("",!0),e.rightNodesComp?(g(),A(ee(e.rightNodesComp),{key:1})):P("",!0),e.branches?(g(),A(o,{key:2,links:e.unref(e.branches)},null,8,["links"])):P("",!0)],64)}var Is=q(Ms,[["render",Ts],["__scopeId","data-v-39ca96d0"]]);const Ps={key:0},Os={key:0,class:"mark star"},As=["src"],Es=E({__name:"MarkNode",props:{mark:{type:[Boolean,String]}},setup(e){return(t,n)=>e.mark?(g(),x("div",Ps,[e.mark===!0?(g(),x("div",Os)):(g(),x("img",{key:1,class:"mark",src:e.mark},null,8,As))])):P("",!0)}});var ft=q(Es,[["__scopeId","data-v-2207999f"]]);const Vs=E({__name:"Node",props:{id:null},setup(e){const n=ne(e),i=jt(gn,()=>{}),r=jt(vn,()=>{}),a=O(null),o=N(()=>a.value&&a.value.parentElement);return Ie([o,n.id],([s,u],[c,h])=>{c&&r(l(h)),s&&i(u,s)}),Gn(()=>r(l(n.id))),(s,u)=>(g(),x("div",{class:"node",ref_key:"node",ref:a},null,512))}});var Ge=q(Vs,[["__scopeId","data-v-2cb1bb79"]]);const Fs=E({props:{display:k(Object,String,Function),visibility:{type:k(Number),required:!0},style:k(String,Object,Array),classes:k(Object),onClick:Function,onHold:Function,color:k(String),glowColor:k(String),canClick:{type:k(Boolean),required:!0},mark:k(Boolean,String),id:{type:String,required:!0}},components:{MarkNode:ft,Node:Ge},setup(e){const{onClick:t,onHold:n,display:i}=ne(e),r=it(i),{start:a,stop:o}=mn(t,n);return{start:a,stop:o,comp:r,unref:l,Visibility:B,isCoercableComponent:Te}}});function Ds(e,t,n,i,r,a){var u;const o=ce("MarkNode"),s=ce("Node");return e.unref(e.visibility)!==e.Visibility.None?(g(),x("div",{key:0,style:W({visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0}),class:Q({treeNode:!0,can:e.unref(e.canClick),...e.unref(e.classes)}),onClick:t[0]||(t[0]=(...c)=>e.onClick&&e.onClick(...c)),onMousedown:t[1]||(t[1]=(...c)=>e.start&&e.start(...c)),onMouseleave:t[2]||(t[2]=(...c)=>e.stop&&e.stop(...c)),onMouseup:t[3]||(t[3]=(...c)=>e.stop&&e.stop(...c)),onTouchstartPassive:t[4]||(t[4]=(...c)=>e.start&&e.start(...c)),onTouchendPassive:t[5]||(t[5]=(...c)=>e.stop&&e.stop(...c)),onTouchcancelPassive:t[6]||(t[6]=(...c)=>e.stop&&e.stop(...c))},[p("div",{style:W([{backgroundColor:e.unref(e.color),boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 20px ${e.unref(e.glowColor)}`},(u=e.unref(e.style))!=null?u:[]])},[(g(),A(ee(e.unref(e.comp))))],4),d(o,{mark:e.unref(e.mark)},null,8,["mark"]),d(s,{id:e.id},null,8,["id"])],38)):P("",!0)}var Rs=q(Fs,[["render",Ds],["__scopeId","data-v-1c0c107d"]]);const Bs=Symbol("TreeNode"),qs=Symbol("Tree");function yt(e){return le(()=>{var n;const t=(n=e==null?void 0:e())!=null?n:{};if(t.id=he("treeNode-"),t.type=Bs,t[de]=Rs,y(t,"visibility"),z(t,"visibility",B.Visible),y(t,"canClick"),z(t,"canClick",!0),y(t,"color"),y(t,"display"),y(t,"glowColor"),y(t,"classes"),y(t,"style"),y(t,"mark"),t.onClick){const i=t.onClick.bind(t);t.onClick=function(){l(t.canClick)&&i()}}if(t.onHold){const i=t.onHold.bind(t);t.onHold=function(){l(t.canClick)&&i()}}return t[me]=function(){const{display:i,visibility:r,style:a,classes:o,onClick:s,onHold:u,color:c,glowColor:h,canClick:v,mark:b,id:w}=this;return{display:i,visibility:r,style:a,classes:o,onClick:s,onHold:u,color:c,glowColor:h,canClick:v,mark:b,id:w}},t})}function ki(e){return le(()=>{const t=e();return t.id=he("tree-"),t.type=qs,t[de]=Is,t.isResetting=O(!1),t.resettingNode=xe(null),t.reset=function(n){var r,a;const i=t;i.isResetting.value=!0,i.resettingNode.value=n,(r=i.resetPropagation)==null||r.call(i,i,n),(a=i.onReset)==null||a.call(i,n),i.isResetting.value=!1,i.resettingNode.value=null},t.links=N(()=>{var i;return(i=l(t.branches))!=null?i:[]}),y(t,"visibility"),z(t,"visibility",B.Visible),y(t,"nodes"),y(t,"leftSideNodes"),y(t,"rightSideNodes"),y(t,"branches"),t[me]=function(){const{nodes:n,leftSideNodes:i,rightSideNodes:r,branches:a}=this;return{nodes:n,leftSideNodes:i,rightSideNodes:r,branches:a}},t})}const Ls=function(e,t){const n=[t];let i=[t];if(e.branches!=null){const r=l(e.branches);for(;i.length>0;){const a=[];i.forEach(o=>{r.filter(s=>s.startNode===o||s.endNode===o).map(s=>s.startNode===o?s.endNode:s.startNode).filter(s=>!n.includes(s)).forEach(s=>{var u;a.includes(s)||(a.push(s),(u=s.reset)==null||u.reset())})}),i=a,n.push(...i)}}};function wi(e,t=null,n=0){const i=Me(n);return N(()=>t==null||f.gte(e.value,l(i))?je(e)+" "+e.displayName:`Reach ${f.eq(t.precision,0)?ve(l(i)):se(l(i),t.precision)} ${t.displayName} to unlock (You have ${f.eq(t.precision,0)?ve(t.value):se(t.value,t.precision)})`)}const js=E({props:{visibility:{type:k(Number),required:!0},display:k(Object,String,Function),earned:{type:k(Boolean),required:!0},image:k(String),style:k(String,Object,Array),classes:k(Object),mark:k(Boolean,String),id:{type:String,required:!0}},components:{Node:Ge,MarkNode:ft},setup(e){const{display:t}=ne(e);return{component:it(t),unref:l,Visibility:B}}});function zs(e,t,n,i,r,a){var u;const o=ce("MarkNode"),s=ce("Node");return e.unref(e.visibility)!==e.Visibility.None?(g(),x("div",{key:0,style:W([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0,backgroundImage:e.earned&&e.image&&`url(${e.image})`||""},(u=e.unref(e.style))!=null?u:[]]),class:Q({feature:!0,achievement:!0,locked:!e.unref(e.earned),bought:e.unref(e.earned),...e.unref(e.classes)})},[e.component?(g(),A(ee(e.component),{key:0})):P("",!0),d(o,{mark:e.unref(e.mark)},null,8,["mark"]),d(s,{id:e.id},null,8,["id"])],6)):P("",!0)}var Us=q(js,[["render",zs],["__scopeId","data-v-58163dab"]]);ge.on("setupVue",e=>e.use(Zi));function wn(e="white",t="8px"){return{transform:"scale(1.05, 1.05)",borderColor:"rgba(0, 0, 0, 0.125)",boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 ${t} ${e}`,zIndex:1}}function Gs(){return wn("red","20px")}const Hs=fn(),Ws=Symbol("Achievement");function rn(e){const t=ue(!1);return le(()=>{var i;const n=(i=e==null?void 0:e())!=null?i:{};if(n.id=he("achievement-"),n.type=Ws,n[de]=Us,n.earned=t,n.complete=function(){t.value=!0},y(n,"visibility"),z(n,"visibility",B.Visible),y(n,"display"),y(n,"mark"),y(n,"image"),y(n,"style"),y(n,"classes"),n[me]=function(){const{visibility:r,display:a,earned:o,image:s,style:u,classes:c,mark:h,id:v}=this;return{visibility:r,display:a,earned:o,image:s,style:l(u),classes:c,mark:h,id:v}},n.shouldEarn){const r=n;Ne(()=>{var a,o;if(Z.active===T.id&&!r.earned.value&&l(r.visibility)===B.Visible&&((a=r.shouldEarn)==null?void 0:a.call(r))&&(r.earned.value=!0,(o=r.onComplete)==null||o.call(r),r.display)){const s=D(l(r.display));Hs.info(d("div",null,[d("h3",null,[C("Achievement earned!")]),d("div",null,[d(s,null,null)])]))}})}return n})}const Ys=E({props:{visibility:{type:k(Number),required:!0},onClick:Function,onHold:Function,display:{type:k(Object,String,Function),required:!0},title:k(Object,String,Function),style:k(String,Object,Array),canClick:{type:k(Boolean),required:!0},id:{type:String,required:!0}},components:{Node:Ge},setup(e){const{onClick:t,onHold:n,title:i,display:r}=ne(e),{start:a,stop:o}=mn(t,n),s=it(i),u=ct(r);return{start:a,stop:o,titleComponent:s,component:u,Visibility:B,unref:l}}}),Ks={key:0};function Zs(e,t,n,i,r,a){var s;const o=ce("Node");return e.unref(e.visibility)!==e.Visibility.None?(g(),x("button",{key:0,class:Q({feature:!0,tile:!0,can:e.unref(e.canClick),locked:!e.unref(e.canClick)}),style:W([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(s=e.unref(e.style))!=null?s:{}]),onClick:t[0]||(t[0]=(...u)=>e.onClick&&e.onClick(...u)),onMousedown:t[1]||(t[1]=(...u)=>e.start&&e.start(...u)),onMouseleave:t[2]||(t[2]=(...u)=>e.stop&&e.stop(...u)),onMouseup:t[3]||(t[3]=(...u)=>e.stop&&e.stop(...u)),onTouchstartPassive:t[4]||(t[4]=(...u)=>e.start&&e.start(...u)),onTouchendPassive:t[5]||(t[5]=(...u)=>e.stop&&e.stop(...u)),onTouchcancelPassive:t[6]||(t[6]=(...u)=>e.stop&&e.stop(...u))},[e.title?(g(),x("div",Ks,[(g(),A(ee(e.titleComponent)))])):P("",!0),(g(),A(ee(e.component),{style:{"white-space":"pre-line"}})),d(o,{id:e.id},null,8,["id"])],38)):P("",!0)}var Js=q(Ys,[["render",Zs],["__scopeId","data-v-26ac0e82"]]);const Xs=E({props:{visibility:{type:k(Number),required:!0},rows:{type:k(Number),required:!0},cols:{type:k(Number),required:!0},cells:{type:k(Object),required:!0}},components:{GridCell:Js},setup(){const e=N(()=>ze[Z.theme].mergeAdjacent);function t(n){const{visibility:i,onClick:r,onHold:a,display:o,title:s,style:u,canClick:c,id:h}=n;return{visibility:i,onClick:r,onHold:a,display:o,title:s,style:u,canClick:c,id:h}}return{unref:l,gatherCellProps:t,Visibility:B,mergeAdjacent:e}}});function Qs(e,t,n,i,r,a){const o=ce("GridCell");return e.unref(e.visibility)!==e.Visibility.None?(g(),x("div",{key:0,style:W({visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0}),class:"table"},[(g(!0),x(K,null,kt(e.unref(e.rows),s=>(g(),x("div",{class:Q(["row",{mergeAdjacent:e.mergeAdjacent}]),key:s},[(g(!0),x(K,null,kt(e.unref(e.cols),u=>(g(),A(o,Be({key:u},e.gatherCellProps(e.unref(e.cells)[s*100+u])),null,16))),128))],2))),128))],4)):P("",!0)}var el=q(Xs,[["render",Qs]]);function tl(e){return new Proxy({},nl(e))}function nl(e){const t=N(()=>{const n=[];for(let i=1;i<=l(e.rows);i++)for(let r=1;r<=l(e.cols);r++)n.push((i*100+r).toString());return n});return{get(n,i){if(i==="isProxy")return!0;if(typeof i=="symbol")return e[i];if(!!t.value.includes(i.toString()))return n[i]==null&&(n[i]=new Proxy(e,il(i.toString()))),n[i]},set(n,i,r){return console.warn("Cannot set grid cells",n,i,r),!1},ownKeys(){return t.value},has(n,i){return t.value.includes(i.toString())},getOwnPropertyDescriptor(n,i){if(t.value.includes(i.toString()))return{configurable:!0,enumerable:!0,writable:!1}}}}function il(e){const t=["id","visibility","canClick","startState","state","style","classes","title","display","onClick","onHold"],n={};return{get(i,r,a){if(r==="isProxy")return!0;let o=i[r];return tt(o)?()=>o.call(a,e,i.getState(e)):o!=null||typeof r=="symbol"?o:(r=r.slice(0,1).toUpperCase()+r.slice(1),r==="startState"?o.call(a,e):(o=i[`get${r}`],tt(o)?(r in n||(n[r]=N(()=>o.call(a,e,i.getState(e)))),n[r].value):o!=null?l(o):(o=i[`on${r}`],tt(o)?()=>o.call(a,e,i.getState(e)):o!=null?o:i[r])))},set(i,r,a,o){return r=`set${r.slice(0,1).toUpperCase()+r.slice(1)}`,r in i&&tt(i[r])&&i[r].length<3?(i[r].call(o,e,a),!0):(console.warn(`No setter for "${r}".`,i),!1)},ownKeys(){return t},has(i,r){return t.includes(r.toString())},getOwnPropertyDescriptor(i,r){if(t.includes(r.toString()))return{configurable:!0,enumerable:!0,writable:!1}}}}function rl(e){const t=ue({});return le(()=>{const n=e();if(n.id=he("grid-"),n[de]=el,n.cellState=t,n.getID=function(i){return n.id+"-"+i},n.getState=function(i){return this.cellState.value[i]!=null?t.value[i]:this.cells[i].startState},n.setState=function(i,r){t.value[i]=r},n.cells=tl(n),y(n,"visibility"),z(n,"visibility",B.Visible),y(n,"rows"),y(n,"cols"),y(n,"getVisibility"),z(n,"getVisibility",B.Visible),y(n,"getCanClick"),z(n,"getCanClick",!0),y(n,"getStartState"),y(n,"getStyle"),y(n,"getClasses"),y(n,"getTitle"),y(n,"getDisplay"),n.onClick){const i=n.onClick.bind(n);n.onClick=function(r,a){l(n.cells[r].canClick)&&i(r,a)}}if(n.onHold){const i=n.onHold.bind(n);n.onHold=function(r,a){l(n.cells[r].canClick)&&i(r,a)}}return n[me]=function(){const{visibility:i,rows:r,cols:a,cells:o,id:s}=this;return{visibility:i,rows:r,cols:a,cells:o,id:s}},n})}var al=E({props:{display:{type:k(Object,String,Function),required:!0},visibility:{type:k(Number),required:!0},style:k(Object,String,Array),classes:k(Object),onClick:Function,onHold:Function,canClick:{type:k(Boolean),required:!0},small:Boolean,mark:k(Boolean,String),id:{type:String,required:!0}},components:{Node:Ge,MarkNode:ft},setup(e){const{display:t,onClick:n,onHold:i}=ne(e),r=xe("");Ne(()=>{const s=ae(t);if(s==null){r.value="";return}if(Te(s)){r.value=D(s);return}const u=D(s.title||"","h3"),c=D(s.description,"div");r.value=D(L(()=>d("span",null,[s.title?d("div",null,[d(u,null,null)]):null,d(c,null,null)])))});const{start:a,stop:o}=mn(n,i);return{start:a,stop:o,comp:r,Visibility:B,unref:l}}});function ol(e,t,n,i,r,a){var u;const o=ce("MarkNode"),s=ce("Node");return e.unref(e.visibility)!==e.Visibility.None?(g(),x("button",{key:0,style:W([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(u=e.unref(e.style))!=null?u:[]]),onClick:t[0]||(t[0]=(...c)=>e.onClick&&e.onClick(...c)),onMousedown:t[1]||(t[1]=(...c)=>e.start&&e.start(...c)),onMouseleave:t[2]||(t[2]=(...c)=>e.stop&&e.stop(...c)),onMouseup:t[3]||(t[3]=(...c)=>e.stop&&e.stop(...c)),onTouchstartPassive:t[4]||(t[4]=(...c)=>e.start&&e.start(...c)),onTouchendPassive:t[5]||(t[5]=(...c)=>e.stop&&e.stop(...c)),onTouchcancelPassive:t[6]||(t[6]=(...c)=>e.stop&&e.stop(...c)),class:Q({feature:!0,clickable:!0,can:e.unref(e.canClick),locked:!e.unref(e.canClick),small:e.small,...e.unref(e.classes)})},[e.unref(e.comp)?(g(),A(ee(e.unref(e.comp)),{key:0})):P("",!0),d(o,{mark:e.unref(e.mark)},null,8,["mark"]),d(s,{id:e.id},null,8,["id"])],38)):P("",!0)}var xi=q(al,[["render",ol],["__scopeId","data-v-5e7c90cf"]]);const sl=Symbol("Clickable");function $t(e){return le(()=>{var n;const t=(n=e==null?void 0:e())!=null?n:{};if(t.id=he("clickable-"),t.type=sl,t[de]=xi,y(t,"visibility"),z(t,"visibility",B.Visible),y(t,"canClick"),z(t,"canClick",!0),y(t,"classes"),y(t,"style"),y(t,"mark"),y(t,"display"),t.onClick){const i=t.onClick.bind(t);t.onClick=function(r){l(t.canClick)&&i(r)}}if(t.onHold){const i=t.onHold.bind(t);t.onHold=function(){l(t.canClick)&&i()}}return t[me]=function(){const{display:i,visibility:r,style:a,classes:o,onClick:s,onHold:u,canClick:c,small:h,mark:v,id:b}=this;return{display:i,visibility:r,style:l(a),classes:o,onClick:s,onHold:u,canClick:c,small:h,mark:v,id:b}},t})}function Ni(e){return $t(()=>{const t=e();y(t,"showNextAt"),z(t,"showNextAt",!0),z(t,"minimumGain",1),t.resetDescription==null?t.resetDescription=N(()=>f.lt(t.conversion.gainResource.value,1e3)?"Reset for ":""):y(t,"resetDescription"),t.display==null&&(t.display=L(()=>d("span",null,[l(t.resetDescription),d("b",null,[je(t.conversion.gainResource,f.max(l(t.conversion.actualGain),l(t.minimumGain)))])," ",t.conversion.gainResource.displayName,l(t.showNextAt)?d("div",null,[d("br",null,null),l(t.conversion.buyMax)?"Next:":"Req:"," ",je(t.conversion.baseResource,l(t.conversion.buyMax)||f.floor(l(t.conversion.actualGain)).neq(1)?l(t.conversion.nextAt):l(t.conversion.currentAt))," ",t.conversion.baseResource.displayName]):null]))),t.canClick==null&&(t.canClick=N(()=>f.gte(l(t.conversion.actualGain),l(t.minimumGain))));const n=t.onClick;return t.onClick=function(){!l(t.canClick)||(t.conversion.convert(),t.tree.reset(t.treeNode),t.resetTime&&(t.resetTime.value=t.resetTime[St]),n==null||n())},t})}function Si(e){return yt(()=>{const t=e();return y(t,"display"),z(t,"display",t.layerID),y(t,"append"),{...t,display:t.display,onClick:l(t.append)?function(){if(T.tabs.includes(t.layerID)){const n=T.tabs.lastIndexOf(t.layerID);T.tabs.splice(n,1)}else T.tabs.push(t.layerID)}:function(){T.tabs.splice(1,1,t.layerID)}}})}function Ci(e){return le(()=>{const t=e();return t.currentGain==null&&(t.currentGain=N(()=>{let n=t.gainModifier?t.gainModifier.apply(t.scaling.currentGain(t)):t.scaling.currentGain(t);return n=f.floor(n).max(0),l(t.buyMax)||(n=n.min(1)),n})),t.actualGain==null&&(t.actualGain=t.currentGain),t.currentAt==null&&(t.currentAt=N(()=>{let n=t.scaling.currentAt(t);return t.roundUpCost&&(n=f.ceil(n)),n})),t.nextAt==null&&(t.nextAt=N(()=>{let n=t.scaling.nextAt(t);return t.roundUpCost&&(n=f.ceil(n)),n})),t.convert==null&&(t.convert=function(){var i;const n=l(t.currentGain);t.gainResource.value=f.add(t.gainResource.value,n),t.spend(n),(i=t.onConvert)==null||i.call(t,n)}),t.spend==null&&(t.spend=function(){t.baseResource.value=0}),y(t,"currentGain"),y(t,"actualGain"),y(t,"currentAt"),y(t,"nextAt"),y(t,"buyMax"),z(t,"buyMax",!0),y(t,"roundUpCost"),z(t,"roundUpCost",!0),t})}function $i(e,t){const n=Me(e),i=Me(t);return{currentGain(r){let a=l(r.baseResource.value);if(r.costModifier&&(a=r.costModifier.apply(a)),f.lt(a,l(n)))return 0;const o=f.div(a,l(n)).pow(l(i));return o.isNan()?new f(0):o},currentAt(r){let a=l(r.currentGain);return r.gainModifier&&(a=r.gainModifier.revert(a)),a=f.max(0,a).root(l(i)).times(l(n)),r.costModifier&&(a=r.costModifier.revert(a)),a},nextAt(r){let a=f.add(l(r.currentGain),1).floor();return r.gainModifier&&(a=r.gainModifier.revert(a)),a=f.max(0,a).root(l(i)).times(l(n)).max(l(n)),r.costModifier&&(a=r.costModifier.revert(a)),a}}}function ll(e){return Ci(e)}function ul(e){return Ci(()=>{const t=e();return z(t,"buyMax",!1),t.currentGain==null&&(t.currentGain=N(()=>{let n=t.gainModifier?t.gainModifier.apply(t.scaling.currentGain(t)):t.scaling.currentGain(t);return n=f.floor(n).max(t.gainResource.value),l(t.buyMax)||(n=n.min(f.add(t.gainResource.value,1))),n})),t.actualGain==null&&(t.actualGain=N(()=>{let n=f.sub(f.floor(t.scaling.currentGain(t)),t.gainResource.value).max(0);return l(t.buyMax)||(n=n.min(1)),n})),z(t,"convert",function(){var i;const n=l(t.actualGain);t.gainResource.value=t.gainModifier?t.gainModifier.apply(l(t.currentGain)):l(t.currentGain),t.spend(n),(i=t.onConvert)==null||i.call(t,n)}),t})}function dl(e,t,n=.5){return f.lte(e,t)?e:f.pow(e,n).times(f.pow(t,f.sub(1,n)))}function cl(e,t,n=.5){return{...e,currentGain:i=>dl(e.currentGain(i),l(t),l(n))}}const fl=E({props:{visibility:{type:k(Number),required:!0},display:{type:k(Object,String,Function),required:!0},title:{type:k(Object,String,Function),required:!0},color:k(String),collapsed:{type:Object,required:!0},style:k(Object,String,Array),titleStyle:k(Object,String,Array),bodyStyle:k(Object,String,Array),classes:k(Object),id:{type:String,required:!0}},components:{Node:Ge,CollapseTransition:Hi},setup(e){const{title:t,display:n}=ne(e),i=ct(t),r=ct(n),a=N(()=>ze[Z.theme].mergeAdjacent);return{titleComponent:i,bodyComponent:r,stacked:a,unref:l,Visibility:B}}}),pl=e=>(qe("data-v-338c9154"),e=e(),Le(),e),ml=pl(()=>p("span",{class:"toggle"},"\u25BC",-1));function gl(e,t,n,i,r,a){var u;const o=ce("CollapseTransition"),s=ce("Node");return e.unref(e.visibility)!==e.Visibility.None?(g(),x("div",{key:0,class:Q(["infobox",{collapsed:e.unref(e.collapsed),stacked:e.stacked,...e.unref(e.classes)}]),style:W([{borderColor:e.unref(e.color),visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(u=e.unref(e.style))!=null?u:{}])},[p("button",{class:"title",style:W([{backgroundColor:e.unref(e.color)},e.unref(e.titleStyle)||[]]),onClick:t[0]||(t[0]=c=>e.collapsed.value=!e.unref(e.collapsed))},[ml,(g(),A(ee(e.titleComponent)))],4),d(o,null,{default:V(()=>[e.unref(e.collapsed)?P("",!0):(g(),x("div",{key:0,class:"body",style:W({backgroundColor:e.unref(e.color)})},[(g(),A(ee(e.bodyComponent),{style:W(e.unref(e.bodyStyle))},null,8,["style"]))],4))]),_:1}),d(s,{id:e.id},null,8,["id"])],6)):P("",!0)}var vl=q(fl,[["render",gl],["__scopeId","data-v-338c9154"]]);const hl=Symbol("Infobox");function Mi(e){const t=ue(!1);return le(()=>{const n=e();return n.id=he("infobox-"),n.type=hl,n[de]=vl,n.collapsed=t,y(n,"visibility"),z(n,"visibility",B.Visible),y(n,"color"),y(n,"style"),y(n,"titleStyle"),y(n,"bodyStyle"),y(n,"classes"),y(n,"title"),y(n,"display"),n[me]=function(){const{visibility:i,display:r,title:a,color:o,collapsed:s,style:u,titleStyle:c,bodyStyle:h,classes:v,id:b}=this;return{visibility:i,display:r,title:a,color:o,collapsed:s,style:l(u),titleStyle:c,bodyStyle:h,classes:v,id:b}},n})}var bl=E({props:{style:k(String,Object,Array),classes:k(Object),onInit:{type:Function,required:!0},id:{type:String,required:!0},onContainerResized:Function,onHotReload:Function},setup(e){const t=O(null),n=new ResizeObserver(a),i=O(null);Tt(()=>{var s,u;const o=i.value;o!=null&&(n.observe(o),t.value=new Ji({resizeTo:o,backgroundAlpha:0}),(s=i.value)==null||s.appendChild(t.value.view),(u=e.onInit)==null||u.call(e,t.value)),a(),e.onHotReload&&Ve(e.onHotReload)}),zi(()=>{var o;(o=t.value)==null||o.destroy()});let r=!0;function a(){r&&(r=!1,Ve(()=>{var o;i.value!=null&&e.onContainerResized&&(e.onContainerResized(i.value.getBoundingClientRect()),(o=t.value)==null||o.resize()),r=!0}))}return document.fonts.ready.then(a),{unref:l,resizeListener:i}}});function yl(e,t,n,i,r,a){return g(),x("div",{ref:"resizeListener",class:Q(["resize-listener",e.unref(e.classes)]),style:W(e.unref(e.style))},null,6)}var _l=q(bl,[["render",yl],["__scopeId","data-v-8adf21fa"]]);const kl=Symbol("Particles");function wl(e){return le(()=>{var r,a;const t=(r=e==null?void 0:e())!=null?r:{};t.id=he("particles-"),t.type=kl,t[de]=_l,t.app=xe(null),t.addEmitter=o=>{const s=t;return s.app.value?Promise.resolve(new Vn(s.app.value.stage,o)):new Promise(u=>{n.push({resolve:u,config:o})})};let n=[];function i(o){t.app.value=o,n.forEach(({resolve:s,config:u})=>s(new Vn(o.stage,u))),n=[]}return t.onContainerResized=(a=t.onContainerResized)==null?void 0:a.bind(t),t[me]=function(){const{id:o,style:s,classes:u,onContainerResized:c,onHotReload:h}=this;return{id:o,style:l(s),classes:u,onContainerResized:c,onHotReload:h,onInit:i}},t})}window.upgradeConfig=Xi;const xl=Symbol("Reset");function Ti(e){return le(()=>{const t=e();return t.id=he("reset-"),t.type=xl,t.reset=function(){var i;const n=r=>{r&&typeof r=="object"&&(Nt in r?r[Nt].value=r[St]:!(r instanceof f)&&!pe(r)&&Object.values(r).forEach(a=>n(a)))};l(t.thingsToReset).forEach(n),ge.emit("reset",t),(i=t.onReset)==null||i.call(t)},y(t,"thingsToReset"),t})}const Dt={};ge.on("removeLayer",e=>{var t;(t=Dt[e.id])==null||t.call(Dt),Dt[e.id]=void 0});const Nl=E({__name:"Sticky",setup(e){const t=O("0"),n=new ResizeObserver(r),i=O(null);function r(){let a=i.value;if(a==null)return;let o=0;for(;a.previousSibling;){const s=a.previousSibling;s.dataset&&"vSticky"in s.dataset&&(o+=s.offsetHeight),a=s}t.value=o+"px"}return Ve(r),document.fonts.ready.then(r),Tt(()=>{var o;const a=(o=i.value)==null?void 0:o.parentElement;a&&n.observe(a)}),(a,o)=>(g(),x("div",{class:"sticky",style:W({top:t.value}),ref_key:"element",ref:i,"data-v-sticky":""},[De(a.$slots,"default",{},void 0,!0)],4))}});var Wt=q(Nl,[["__scopeId","data-v-21495571"]]);const Ii=E({__name:"Resource",props:{resource:null,color:null},setup(e){const t=e,n=N(()=>je(t.resource));return(i,r)=>(g(),x("h2",{style:W({color:e.color,"text-shadow":"0px 0px 10px "+e.color})},U(l(n)),5))}});const Sl={class:"main-display"},Cl={key:0},$l={key:1},Ml=C(", "),Pi=E({__name:"MainDisplay",props:{resource:null,color:null,classes:null,style:null,effectDisplay:null},setup(e){const n=ne(e),i=O(null),r=it(n.effectDisplay),a=N(()=>f.lt(n.resource.value,"1e1000"));return(o,s)=>(g(),A(Wt,null,{default:V(()=>{var u,c;return[p("div",{class:"main-display-container",style:W({height:`${((c=(u=i.value)==null?void 0:u.$el.clientHeight)!=null?c:0)+50}px`})},[p("div",Sl,[l(a)?(g(),x("span",Cl,"You have ")):P("",!0),d(Ii,{resource:e.resource,color:e.color||"white"},null,8,["resource","color"]),C(" "+U(e.resource.displayName),1),l(r)?(g(),x("span",$l,[Ml,(g(),A(ee(l(r)),{ref_key:"effectRef",ref:i},null,512))])):P("",!0)])],4)]}),_:1}))}});function un(e,t){return y(t,"display"),y(t,"classes"),y(t,"style"),y(t,"direction"),z(t,"direction",X.Up),y(t,"xoffset"),y(t,"yoffset"),t.pinnable&&("pinned"in e?(console.error("Cannot add pinnable tooltip to element that already has a property called 'pinned'"),t.pinnable=!1):e.pinned=t.pinned=ue(!1)),Ve(()=>{const n=e[de];e[de]=re;const i=e[me].bind(e);e[me]=function(){const{display:a,classes:o,style:s,direction:u,xoffset:c,yoffset:h,pinned:v}=this;return{element:{[de]:n,[me]:i},display:a,classes:o,style:l(s),direction:u,xoffset:c,yoffset:h,pinned:v}}.bind(t)}),t}function Tl(e){return le(()=>{const{addend:t,description:n,enabled:i}=e(),r=Me(t),a=Me(n),o=i==null?void 0:Me(i);return{apply:s=>f.add(s,l(r)),revert:s=>f.sub(s,l(r)),enabled:o,description:n==null?void 0:L(()=>d("div",{class:"modifier-container"},[d("span",{class:"modifier-amount"},[f.gte(l(r),0)?"+":"",se(l(r))]),l(a)?d("span",{class:"modifier-description"},[Re(l(a))]):null]))}})}function Il(e){return le(()=>{const{multiplier:t,description:n,enabled:i}=e(),r=Me(t),a=Me(n),o=i==null?void 0:Me(i);return{apply:s=>f.times(s,l(r)),revert:s=>f.div(s,l(r)),enabled:o,description:n==null?void 0:L(()=>d("div",{class:"modifier-container"},[d("span",{class:"modifier-amount"},[C("x"),se(l(r))]),l(a)?d("span",{class:"modifier-description"},[Re(l(a))]):null]))}})}function Pl(e){return le(()=>{const{exponent:t,description:n,enabled:i}=e(),r=Me(t),a=Me(n),o=i==null?void 0:Me(i);return{apply:s=>f.pow(s,l(r)),revert:s=>f.root(s,l(r)),enabled:o,description:n==null?void 0:L(()=>d("div",{class:"modifier-container"},[d("span",{class:"modifier-amount"},[C("^"),se(l(r))]),l(a)?d("span",{class:"modifier-description"},[Re(l(a))]):null]))}})}function Ol(...e){return{apply:t=>e.filter(n=>l(n.enabled)!==!1).reduce((n,i)=>i.apply(n),t),revert:e.every(t=>t.revert!=null)?t=>e.filter(n=>l(n.enabled)!==!1).reduceRight((n,i)=>i.revert(n),t):void 0,enabled:N(()=>e.filter(t=>l(t.enabled)!==!1).length>0),description:L(()=>d(K,null,[e.filter(t=>l(t.enabled)!==!1).map(t=>l(t.description)).filter(t=>t).map(Re)]))}}function Al(e,t,n,i=1,r="",a="Base"){return d("div",null,[d("h3",null,[e,t?d("span",{class:"subtitle"},[C(" ("),t,C(")")]):null]),d("br",null,null),d("div",{class:"modifier-container"},[d("span",{class:"modifier-amount"},[se(i),r]),d("span",{class:"modifier-description"},[Re(a)])]),Re(l(n.description)),d("hr",null,null),C("Total: "),se(n.apply(i)),r])}const El={class:"field"},Vl={key:0,class:"field-title"},Fl=["min","max"],Dl=E({__name:"Slider",props:{title:null,modelValue:null,min:null,max:null},emits:["update:modelValue"],setup(e,{emit:t}){const i=ne(e),r=N({get(){return String(l(i.modelValue)||0)},set(a){t("update:modelValue",Number(a))}});return(a,o)=>(g(),x("div",El,[e.title?(g(),x("span",Vl,U(e.title),1)):P("",!0),d(re,{display:`${l(r)}`,class:Q({fullWidth:!e.title}),direction:l(X).Down},{default:V(()=>[Kt(p("input",{type:"range","onUpdate:modelValue":o[0]||(o[0]=s=>pe(r)?r.value=s:null),min:e.min,max:e.max},null,8,Fl),[[Hn,l(r)]])]),_:1},8,["display","class","direction"])]))}});var Rl=q(Dl,[["__scopeId","data-v-1b053b9f"]]);const Bl=E({__name:"VerticalRule",props:{height:null},setup(e){return(t,n)=>(g(),x("div",{class:"vr",style:W({height:e.height})},null,4))}});var ql=q(Bl,[["__scopeId","data-v-5e0a978a"]]);const Ll=E({props:{progress:{type:k(String,Object,Number),required:!0},width:{type:k(Number),required:!0},height:{type:k(Number),required:!0},direction:{type:k(String),required:!0},display:k(Object,String,Function),visibility:{type:k(Number),required:!0},style:k(Object,String,Array),classes:k(Object),borderStyle:k(Object,String,Array),textStyle:k(Object,String,Array),baseStyle:k(Object,String,Array),fillStyle:k(Object,String,Array),mark:k(Boolean,String),id:{type:String,required:!0}},components:{MarkNode:ft,Node:Ge},setup(e){const{progress:t,width:n,height:i,direction:r,display:a}=ne(e),o=N(()=>{let c=t.value instanceof f?t.value.toNumber():Number(t.value);return(1-Math.min(Math.max(c,0),1))*100}),s=N(()=>{const c={width:ae(n)+.5+"px",height:ae(i)+.5+"px"};switch(l(r)){case X.Up:c.clipPath=`inset(${o.value}% 0% 0% 0%)`,c.width=ae(n)+1+"px";break;case X.Down:c.clipPath=`inset(0% 0% ${o.value}% 0%)`,c.width=ae(n)+1+"px";break;case X.Right:c.clipPath=`inset(0% ${o.value}% 0% 0%)`;break;case X.Left:c.clipPath=`inset(0% 0% 0% ${o.value} + '%)`;break;case X.Default:c.clipPath="inset(0% 50% 0% 0%)";break}return c}),u=it(a);return{normalizedProgress:o,barStyle:s,component:u,unref:l,Visibility:B}}});function jl(e,t,n,i,r,a){var u,c,h,v,b,w,S;const o=ce("MarkNode"),s=ce("Node");return e.unref(e.visibility)!==e.Visibility.None?(g(),x("div",{key:0,style:W([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px",visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(u=e.unref(e.style))!=null?u:{}]),class:Q({bar:!0,...e.unref(e.classes)})},[p("div",{class:"overlayTextContainer border",style:W([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px"},(c=e.unref(e.borderStyle))!=null?c:{}])},[e.component?(g(),x("span",{key:0,class:"overlayText",style:W(e.unref(e.textStyle))},[(g(),A(ee(e.component)))],4)):P("",!0)],4),p("div",{class:"border",style:W([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px"},(h=e.unref(e.style))!=null?h:{},(v=e.unref(e.baseStyle))!=null?v:{},(b=e.unref(e.borderStyle))!=null?b:{}])},[p("div",{class:"fill",style:W([e.barStyle,(w=e.unref(e.style))!=null?w:{},(S=e.unref(e.fillStyle))!=null?S:{}])},null,4)],4),d(o,{mark:e.unref(e.mark)},null,8,["mark"]),d(s,{id:e.id},null,8,["id"])],6)):P("",!0)}var zl=q(Ll,[["render",jl],["__scopeId","data-v-02d0d7b2"]]);const Ul=Symbol("Bar");function an(e){return le(()=>{const t=e();return t.id=he("bar-"),t.type=Ul,t[de]=zl,y(t,"visibility"),z(t,"visibility",B.Visible),y(t,"width"),y(t,"height"),y(t,"direction"),y(t,"style"),y(t,"classes"),y(t,"borderStyle"),y(t,"baseStyle"),y(t,"textStyle"),y(t,"fillStyle"),y(t,"progress"),y(t,"display"),y(t,"mark"),t[me]=function(){const{progress:n,width:i,height:r,direction:a,display:o,visibility:s,style:u,classes:c,borderStyle:h,textStyle:v,baseStyle:b,fillStyle:w,mark:S,id:$}=this;return{progress:n,width:i,height:r,direction:a,display:o,visibility:s,style:l(u),classes:c,borderStyle:h,textStyle:v,baseStyle:b,fillStyle:w,mark:S,id:$}},t})}const Gl=Symbol("Buyable");function Hl(e){const t=ue(0);return le(()=>{var a,o;const n=e();if(n.canPurchase==null&&(n.resource==null||n.cost==null))throw console.warn("Cannot create buyable without a canPurchase property or a resource and cost property",n),"Cannot create buyable without a canPurchase property or a resource and cost property";n.id=he("buyable-"),n.type=Gl,n[de]=xi,n.amount=t,n.canAfford=N(()=>{const s=n,u=l(s.cost);return s.resource!=null&&u!=null&&f.gte(s.resource.value,u)}),n.canPurchase==null&&(n.canPurchase=N(()=>l(n.visibility)===B.Visible&&l(n.canAfford)&&f.lt(n.amount.value,l(n.purchaseLimit)))),n.maxed=N(()=>f.gte(n.amount.value,l(n.purchaseLimit))),y(n,"classes");const i=n.classes;n.classes=N(()=>{const s=l(i)||{};return n.maxed.value&&(s.bought=!0),s}),y(n,"canPurchase"),n.canClick=n.canPurchase,n.onClick=n.purchase=(o=(a=n.onClick)!=null?a:n.purchase)!=null?o:function(){var c;const s=n;if(!l(s.canPurchase))return;const u=l(s.cost);s.cost!=null&&s.resource!=null&&(s.resource.value=f.sub(s.resource.value,u),s.amount.value=f.add(s.amount.value,1)),(c=s.onPurchase)==null||c.call(s,u)},y(n,"display");const r=n.display;return n.display=L(()=>{const s=l(r);if(Te(s)){const u=D(s);return d(u,null,null)}if(s!=null&&n.cost!=null&&n.resource!=null){const u=n,c=D(s.title||"","h3"),h=D(s.description||""),v=D(s.effectDisplay||"");return d("span",null,[s.title?d("div",null,[d(c,null,null)]):null,s.description?d(h,null,null):null,s.showAmount===!1?null:d("div",null,[d("br",null,null),l(u.purchaseLimit)===f.dInf?d(K,null,[C("Amount: "),ve(u.amount.value)]):d(K,null,[C("Amount: "),ve(u.amount.value),C(" /")," ",ve(l(u.purchaseLimit))])]),s.effectDisplay?d("div",null,[d("br",null,null),C("Currently: "),d(v,null,null)]):null,u.cost&&!u.maxed.value?d("div",null,[d("br",null,null),C("Cost: "),se(l(u.cost)||0)," ",n.resource.displayName]):null])}return""}),y(n,"visibility"),z(n,"visibility",B.Visible),y(n,"cost"),y(n,"resource"),y(n,"purchaseLimit"),z(n,"purchaseLimit",f.dInf),y(n,"style"),y(n,"mark"),y(n,"small"),n[me]=function(){const{display:s,visibility:u,style:c,classes:h,onClick:v,canClick:b,small:w,mark:S,id:$}=this;return{display:s,visibility:u,style:l(c),classes:h,onClick:v,canClick:b,small:w,mark:S,id:$}},n})}var Wl=E({props:{active:{type:k(Boolean),required:!0},maxed:{type:k(Boolean),required:!0},canComplete:{type:k(Boolean),required:!0},display:k(String,Object,Function),visibility:{type:k(Number),required:!0},style:k(String,Object,Array),classes:k(Object),completed:{type:k(Boolean),required:!0},canStart:{type:k(Boolean),required:!0},mark:k(Boolean,String),id:{type:String,required:!0},toggle:{type:Function,required:!0}},components:{MarkNode:ft,Node:Ge},setup(e){const{active:t,maxed:n,canComplete:i,display:r}=ne(e),a=N(()=>t.value?i.value?"Finish":"Exit Early":n.value?"Completed":"Start"),o=xe(""),s=N(()=>{const u=ae(t),c=ae(i);return u?c?Gs():wn():{}});return Ne(()=>{const u=ae(r);if(u==null){o.value="";return}if(Te(u)){o.value=D(u);return}const c=D(u.title||"","h3"),h=D(u.description,"div"),v=D(u.goal||""),b=D(u.reward||""),w=D(u.effectDisplay||"");o.value=D(L(()=>d("span",null,[u.title?d("div",null,[d(c,null,null)]):null,d(h,null,null),u.goal?d("div",null,[d("br",null,null),C("Goal: "),d(v,null,null)]):null,u.reward?d("div",null,[d("br",null,null),C("Reward: "),d(b,null,null)]):null,u.effectDisplay?d("div",null,[C("Currently: "),d(w,null,null)]):null])))}),{buttonText:a,notifyStyle:s,comp:o,Visibility:B,unref:l}}});const Yl=["disabled"];function Kl(e,t,n,i,r,a){var u;const o=ce("MarkNode"),s=ce("Node");return e.unref(e.visibility)!==e.Visibility.None?(g(),x("div",{key:0,style:W([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},e.notifyStyle,(u=e.unref(e.style))!=null?u:{}]),class:Q({feature:!0,challenge:!0,done:e.unref(e.completed),canStart:e.unref(e.canStart)&&!e.unref(e.maxed),maxed:e.unref(e.maxed),...e.unref(e.classes)})},[p("button",{class:"toggleChallenge",onClick:t[0]||(t[0]=(...c)=>e.toggle&&e.toggle(...c)),disabled:!e.unref(e.canStart)||e.unref(e.maxed)},U(e.buttonText),9,Yl),e.unref(e.comp)?(g(),A(ee(e.unref(e.comp)),{key:0})):P("",!0),d(o,{mark:e.unref(e.mark)},null,8,["mark"]),d(s,{id:e.id},null,8,["id"])],6)):P("",!0)}var Zl=q(Wl,[["render",Kl],["__scopeId","data-v-4d2947df"]]);const Jl=Symbol("ChallengeType");function Xl(e){const t=ue(0),n=ue(!1);return le(()=>{const i=e();if(i.canComplete==null&&(i.resource==null||i.goal==null))throw console.warn("Cannot create challenge without a canComplete property or a resource and goal property",i),"Cannot create challenge without a canComplete property or a resource and goal property";i.id=he("challenge-"),i.type=Jl,i[de]=Zl,i.completions=t,i.active=n,i.completed=N(()=>f.gt(i.completions.value,0)),i.maxed=N(()=>f.gte(i.completions.value,l(i.completionLimit))),i.toggle=function(){var o,s,u,c,h;const a=i;if(a.active.value){if(l(a.canComplete)&&!a.maxed.value){let v=l(a.canComplete);typeof v=="boolean"&&(v=1),a.completions.value=f.min(f.add(a.completions.value,v),l(a.completionLimit)),(o=a.onComplete)==null||o.call(a)}a.active.value=!1,(s=a.onExit)==null||s.call(a),(u=a.reset)==null||u.reset()}else l(a.canStart)&&l(a.visibility)===B.Visible&&!a.maxed.value&&((c=a.reset)==null||c.reset(),a.active.value=!0,(h=a.onEnter)==null||h.call(a))},i.complete=function(a){var u,c,h;const o=i;let s=l(o.canComplete);o.active.value&&s!==!1&&(s===!0||f.neq(0,s))&&!o.maxed.value&&(typeof s=="boolean"&&(s=1),o.completions.value=f.min(f.add(o.completions.value,s),l(o.completionLimit)),(u=o.onComplete)==null||u.call(o),a!==!0&&(o.active.value=!1,(c=o.onExit)==null||c.call(o),(h=o.reset)==null||h.reset()))},y(i,"visibility"),z(i,"visibility",B.Visible);const r=i.visibility;return i.visibility=N(()=>Z.hideChallenges===!0&&l(i.maxed)?B.None:l(r)),i.canComplete==null&&(i.canComplete=N(()=>{const a=i;return!a.active.value||a.resource==null||a.goal==null?!1:f.gte(a.resource.value,l(a.goal))})),i.mark==null&&(i.mark=N(()=>f.gt(l(i.completionLimit),1)&&!!l(i.maxed))),y(i,"canStart"),z(i,"canStart",!0),y(i,"canComplete"),y(i,"completionLimit"),z(i,"completionLimit",1),y(i,"mark"),y(i,"goal"),y(i,"classes"),y(i,"style"),y(i,"display"),i.reset!=null&&ge.on("reset",a=>{a===i.reset&&i.active.value&&i.toggle()}),i[me]=function(){const{active:a,maxed:o,canComplete:s,display:u,visibility:c,style:h,classes:v,completed:b,canStart:w,mark:S,id:$,toggle:R}=this;return{active:a,maxed:o,canComplete:s,display:u,visibility:c,style:l(h),classes:v,completed:b,canStart:w,mark:S,id:$,toggle:R}},i})}ge.on("loadSettings",e=>{z(e,"hideChallenges",!1)});si(L(()=>d(we,{title:"Hide Maxed Challenges","onUpdate:modelValue":e=>Z.hideChallenges=e,modelValue:Z.hideChallenges},null)));const Xt=Yt({}),xn=Symbol("Hotkey");function Ln(e){return le(()=>{const t=e();return t.type=xn,y(t,"enabled"),z(t,"enabled",!0),y(t,"description"),t})}ge.on("addLayer",e=>{ti(e,xn).forEach(t=>{Xt[t.key]=t})});ge.on("removeLayer",e=>{ti(e,xn).forEach(t=>{Xt[t.key]=void 0})});document.onkeydown=function(e){var i;if(((i=e.target)==null?void 0:i.tagName)==="INPUT"||Nn.value&&!T.keepGoing)return;let t=e.key;e.shiftKey&&(t="shift+"+t),e.ctrlKey&&(t="ctrl+"+t);const n=Xt[t];n&&l(n.enabled)&&(e.preventDefault(),n.onPress())};ea(L(()=>{const e=Object.values(Xt).filter(t=>l(t==null?void 0:t.enabled));return e.length===0?"":d("div",null,[d("br",null,null),d("h4",null,[C("Hotkeys")]),e.map(t=>d("div",null,[t==null?void 0:t.key,C(": "),t==null?void 0:t.description]))])}));const Ql=Symbol("Links");function eu(e){return le(()=>{const t=e();return t.type=Ql,t[de]=_i,y(t,"links"),t[me]=function(){const{links:n}=this;return{links:n}},t})}var tu=E({props:{visibility:{type:k(Number),required:!0},display:{type:k(String,Object,Function),required:!0},style:k(String,Object,Array),classes:k(Object),earned:{type:k(Boolean),required:!0},id:{type:String,required:!0}},components:{Node:Ge},setup(e){const{display:t}=ne(e),n=xe("");return Ne(()=>{const i=ae(t);if(i==null){n.value="";return}if(Te(i)){n.value=D(i);return}const r=D(i.requirement,"h3"),a=D(i.effectDisplay||"","b"),o=D(i.optionsDisplay||"","span");n.value=D(L(()=>d("span",null,[d(r,null,null),i.effectDisplay?d("div",null,[d(a,null,null)]):null,i.optionsDisplay?d("div",{class:"equal-spaced"},[d(o,null,null)]):null])))}),{comp:n,unref:l,Visibility:B}}});function nu(e,t,n,i,r,a){var s;const o=ce("Node");return e.unref(e.visibility)!==e.Visibility.None?(g(),x("div",{key:0,style:W([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(s=e.unref(e.style))!=null?s:{}]),class:Q({feature:!0,milestone:!0,done:e.unref(e.earned),...e.unref(e.classes)})},[(g(),A(ee(e.unref(e.comp)))),d(o,{id:e.id},null,8,["id"])],6)):P("",!0)}var iu=q(tu,[["render",nu],["__scopeId","data-v-f4e8794e"]]);const ru=fn(),au=Symbol("Milestone");let Ke;(function(e){e.All="all",e.Configurable="configurable",e.Incomplete="incomplete",e.None="none"})(Ke||(Ke={}));function jn(e){const t=ue(!1);return le(()=>{var r;const n=(r=e==null?void 0:e())!=null?r:{};n.id=he("milestone-"),n.type=au,n[de]=iu,n.earned=t,n.complete=function(){t.value=!0},y(n,"visibility"),z(n,"visibility",B.Visible);const i=n.visibility;if(n.visibility=N(()=>{const a=l(n.display);switch(Z.msDisplay){default:case Ke.All:return l(i);case Ke.Configurable:return l(n.earned)&&!(a!=null&&typeof a=="object"&&"optionsDisplay"in a)?B.None:l(i);case Ke.Incomplete:return l(n.earned)?B.None:l(i);case Ke.None:return B.None}}),y(n,"style"),y(n,"classes"),y(n,"display"),n[me]=function(){const{visibility:a,display:o,style:s,classes:u,earned:c,id:h}=this;return{visibility:a,display:o,style:l(s),classes:u,earned:c,id:h}},n.shouldEarn){const a=n;Ne(()=>{var o,s;if(Z.active===T.id&&!a.earned.value&&l(a.visibility)===B.Visible&&((o=a.shouldEarn)==null?void 0:o.call(a))&&(a.earned.value=!0,(s=a.onComplete)==null||s.call(a),a.display)){const u=l(a.display),c=D(Te(u)?u:u.requirement);ru(d(K,null,[d("h3",null,[C("Milestone earned!")]),d("div",null,[d(c,null,null)])]))}})}return n})}ge.on("loadSettings",e=>{z(e,"msDisplay",Ke.All)});const ou=Object.values(Ke).map(e=>({label:ei(e),value:e}));si(L(()=>d(yn,{title:"Show Milestones",options:ou,"onUpdate:modelValue":e=>Z.msDisplay=e,modelValue:Z.msDisplay},null)));const su=E({__name:"Tab",props:{display:null},setup(e){const t=e,{display:n}=ne(t),i=ct(n);return(r,a)=>(g(),A(ee(l(i))))}}),lu=Symbol("Tab");function Rt(e){return le(()=>{const t=e();return t.id=he("tab-"),t.type=lu,t[de]=su,t[me]=function(){const{display:n}=this;return{display:n}},t})}const uu=E({props:{visibility:{type:k(Number),required:!0},display:{type:k(Object,String,Function),required:!0},style:k(String,Object,Array),classes:k(Object),glowColor:k(String),active:Boolean,floating:Boolean},emits:["selectTab"],setup(e,{emit:t}){const{display:n,glowColor:i,floating:r}=ne(e),a=ct(n),o=N(()=>{const u=ae(i);return u?l(r)?wn(u):{boxShadow:`0px 9px 5px -6px ${u}`}:{}});function s(){t("selectTab")}return{selectTab:s,component:a,glowColorStyle:o,unref:l,Visibility:B}}});function du(e,t,n,i,r,a){var o;return e.unref(e.visibility)!==e.Visibility.None?(g(),x("button",{key:0,onClick:t[0]||(t[0]=(...s)=>e.selectTab&&e.selectTab(...s)),class:Q(["tabButton",{active:e.active,...e.unref(e.classes)}]),style:W([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},e.glowColorStyle,(o=e.unref(e.style))!=null?o:{}])},[(g(),A(ee(e.component)))],6)):P("",!0)}var Oi=q(uu,[["render",du],["__scopeId","data-v-610a2549"]]);const cu=E({props:{visibility:{type:k(Number),required:!0},activeTab:{type:k(Object),required:!0},selected:{type:Object,required:!0},tabs:{type:k(Object),required:!0},style:k(String,Object,Array),classes:k(Object),buttonContainerStyle:k(String,Object,Array),buttonContainerClasses:k(Object)},components:{Sticky:Wt,TabButton:Oi},setup(e){const{activeTab:t}=ne(e),n=N(()=>ze[Z.theme].floatingTabs),i=xe("");Ne(()=>{const s=ae(t);if(s==null){i.value="";return}if(Te(s)){i.value=D(s);return}i.value=D(l(s.display))});const r=N(()=>{const s=ae(t);return Te(s)||!s?void 0:l(s.classes)}),a=N(()=>{const s=ae(t);return Te(s)||!s?void 0:l(s.style)});function o(s){const{display:u,style:c,classes:h,glowColor:v,visibility:b}=s;return{display:u,style:l(c),classes:h,glowColor:v,visibility:b}}return{floating:n,tabClasses:r,tabStyle:a,Visibility:B,component:i,gatherButtonProps:o,unref:l}}});function fu(e,t,n,i,r,a){var u,c;const o=ce("TabButton"),s=ce("Sticky");return e.unref(e.visibility)!==e.Visibility.None?(g(),x("div",{key:0,class:Q(["tab-family-container",{...e.unref(e.classes),...e.tabClasses}]),style:W([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(u=e.unref(e.style))!=null?u:[],(c=e.tabStyle)!=null?c:[]])},[d(s,{class:Q(["tab-buttons-container",e.unref(e.buttonContainerClasses)]),style:W(e.unref(e.buttonContainerStyle))},{default:V(()=>[p("div",{class:Q(["tab-buttons",{floating:e.floating}])},[(g(!0),x(K,null,kt(e.unref(e.tabs),(h,v)=>(g(),A(o,Be({onSelectTab:b=>e.selected.value=v,floating:e.floating,key:v,active:e.unref(h.tab)===e.unref(e.activeTab)},e.gatherButtonProps(h)),null,16,["onSelectTab","floating","active"]))),128))],2)]),_:1},8,["class","style"]),e.unref(e.activeTab)?(g(),A(ee(e.unref(e.component)),{key:0})):P("",!0)],6)):P("",!0)}var pu=q(cu,[["render",fu],["__scopeId","data-v-11575f45"]]);const mu=Symbol("TabButton"),gu=Symbol("TabFamily");function zn(e,t){if(Object.keys(e).length===0)throw console.warn("Cannot create tab family with 0 tabs"),"Cannot create tab family with 0 tabs";const n=ue(Object.keys(e)[0]);return le(()=>{var a;const i=(a=t==null?void 0:t())!=null?a:{};i.id=he("tabFamily-"),i.type=gu,i[de]=pu,i.tabs=Object.keys(e).reduce((o,s)=>{const u=e[s]();return u.type=mu,u[de]=Oi,y(u,"visibility"),z(u,"visibility",B.Visible),y(u,"tab"),y(u,"display"),y(u,"classes"),y(u,"style"),y(u,"glowColor"),o[s]=u,o},{}),i.selected=n,i.activeTab=N(()=>{const o=l(r.tabs);if(n.value in o&&l(o[n.value].visibility)===B.Visible)return l(o[n.value].tab);const s=Object.values(o).find(u=>l(u.visibility)===B.Visible);return s?l(s.tab):null}),y(i,"visibility"),z(i,"visibility",B.Visible),y(i,"classes"),y(i,"style"),y(i,"buttonContainerClasses"),y(i,"buttonContainerStyle"),i[me]=function(){const{visibility:o,activeTab:s,selected:u,tabs:c,style:h,classes:v,buttonContainerClasses:b,buttonContainerStyle:w}=this;return{visibility:o,activeTab:s,selected:u,tabs:c,style:l(h),classes:v,buttonContainerClasses:b,buttonContainerStyle:w}};const r=i;return r})}var vu=E({props:{display:{type:k(String,Object,Function),required:!0},visibility:{type:k(Number),required:!0},style:k(String,Object,Array),classes:k(Object),resource:Object,cost:k(String,Object,Number),canPurchase:{type:k(Boolean),required:!0},bought:{type:k(Boolean),required:!0},mark:k(Boolean,String),id:{type:String,required:!0},purchase:{type:Function,required:!0}},components:{Node:Ge,MarkNode:ft},setup(e){const{display:t,cost:n}=ne(e),i=xe("");return Ne(()=>{const r=ae(t);if(r==null){i.value="";return}if(Te(r)){i.value=D(r);return}const a=ae(n),o=D(r.title||"","h3"),s=D(r.description,"div"),u=D(r.effectDisplay||"");i.value=D(L(()=>{var c;return d("span",null,[r.title?d("div",null,[d(o,null,null)]):null,d(s,null,null),r.effectDisplay?d("div",null,[C("Currently: "),d(u,null,null)]):null,e.resource!=null?d(K,null,[d("br",null,null),C("Cost: "),e.resource&&je(e.resource,a)," ",(c=e.resource)==null?void 0:c.displayName]):null])}))}),{component:i,unref:l,Visibility:B}}});const hu=["disabled"];function bu(e,t,n,i,r,a){var u;const o=ce("MarkNode"),s=ce("Node");return e.unref(e.visibility)!==e.Visibility.None?(g(),x("button",{key:0,style:W([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(u=e.unref(e.style))!=null?u:{}]),onClick:t[0]||(t[0]=(...c)=>e.purchase&&e.purchase(...c)),class:Q({feature:!0,upgrade:!0,can:e.unref(e.canPurchase),locked:!e.unref(e.canPurchase),bought:e.unref(e.bought),...e.unref(e.classes)}),disabled:!e.unref(e.canPurchase)},[e.unref(e.component)?(g(),A(ee(e.unref(e.component)),{key:0})):P("",!0),d(o,{mark:e.unref(e.mark)},null,8,["mark"]),d(s,{id:e.id},null,8,["id"])],14,hu)):P("",!0)}var yu=q(vu,[["render",bu],["__scopeId","data-v-7742f590"]]);const _u=Symbol("Upgrade");function Bt(e){const t=ue(!1);return le(()=>{const n=e();return n.id=he("upgrade-"),n.type=_u,n[de]=yu,n.canAfford==null&&(n.resource==null||n.cost==null)&&console.warn("Error: can't create upgrade without a canAfford property or a resource and cost property",n),n.bought=t,n.canAfford==null?n.canAfford=N(()=>{const i=n;return i.resource!=null&&i.cost!=null&&f.gte(i.resource.value,l(i.cost))}):y(n,"canAfford"),n.canPurchase=N(()=>l(n.visibility)===B.Visible&&l(n.canAfford)&&!l(n.bought)),n.purchase=function(){var r;const i=n;!l(i.canPurchase)||(i.resource!=null&&i.cost!=null&&(i.resource.value=f.sub(i.resource.value,l(i.cost))),t.value=!0,(r=i.onPurchase)==null||r.call(i))},y(n,"visibility"),z(n,"visibility",B.Visible),y(n,"classes"),y(n,"style"),y(n,"display"),y(n,"mark"),y(n,"cost"),y(n,"resource"),n[me]=function(){const{display:i,visibility:r,style:a,classes:o,resource:s,cost:u,canPurchase:c,bought:h,mark:v,id:b,purchase:w}=this;return{display:i,visibility:r,style:l(a),classes:o,resource:s,cost:u,canPurchase:c,bought:h,mark:v,id:b,purchase:w}},n})}function ku(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!cn(e)}const on="c",Oe=It(on,()=>{const e="#4BDC13",t="Candies",n=Ct(0,"lollipops"),i=yi(n),r=ue(!1),a=ue("pointy"),o=ue(10),s=ue(new f(10)),u=N(()=>f.pow(n.value,.2)),c=N(()=>f.times(n.value,10)),h=Mi(()=>({title:"Lore",titleStyle:{color:"#FE0000"},display:"DEEP LORE!",bodyStyle:{backgroundColor:"#0000EE"},color:"rgb(75, 220, 19)"})),v=jn(()=>({shouldEarn(){return f.gte(i.value,3)},display:{requirement:"3 Lollipops",effectDisplay:"Unlock the next milestone"}})),b=jn(()=>({visibility(){return gt(v.earned.value)},shouldEarn(){return f.gte(i.value,4)},display:{requirement:"4 Lollipops",effectDisplay:"You can toggle beep and boop (which do nothing)",optionsDisplay:L(()=>d(K,null,[d(we,{title:"beep","onUpdate:modelValue":H=>r.value=H,modelValue:r.value},null),d(we,{title:"boop","onUpdate:modelValue":H=>Fe.boop.value=H,modelValue:Fe.boop.value},null)]))},style(){return this.earned?{backgroundColor:"#1111DD"}:{}}})),w=[v,b],S=Xl(()=>({title:"Fun",completionLimit:3,display(){return{description:`Makes the game 0% harder<br>${ve(this.completions.value)}/${this.completionLimit} completions`,goal:"Have 20 points I guess",reward:"Says hi",effectDisplay:se($.value)+"x"}},visibility(){return gt(f.gt(i.value,0))},goal:20,resource:Y.points,onComplete(){console.log("hiii")},onEnter(){Y.points.value=0,Y.best.value=Y.points.value,Y.total.value=Y.points.value,console.log("So challenging")},onExit(){console.log("Sweet freedom!")},style:{height:"200px"}})),$=N(()=>f.add(n.value,1).tetrate(.02)),R=Bt(()=>({display:{title:"Generator of Genericness",description:"Gain 1 point every second"},cost:1,resource:n})),ke=Bt(()=>({display:()=>({description:"Point generation is faster based on your unspent Lollipops",effectDisplay:`${se(M.value)}x`}),cost:1,resource:n,visibility:()=>gt(R.bought.value)})),M=N(()=>{let H=f.add(n.value,1).pow(.5);return H.gte("1e20000000")&&(H=H.sqrt().times("1e10000000")),H}),I=Bt(()=>({visibility(){return gt(ke.bought.value)},canAfford(){return f.lt(Y.points.value,7)},onPurchase(){Y.points.value=f.add(Y.points.value,7)},display:"Only buyable with less than 7 points, and gives you 7 more. Unlocks a secret subtab.",style(){return this.bought?{backgroundColor:"#1111dd"}:this.canAfford?{}:{backgroundColor:"#dd1111"}}})),G=Bt(()=>({resource:Ct(te.amount,"Exhancers",0),cost:3,display:{title:"This upgrade doesn't exist",description:"Or does it?"}})),be=[R,ke,I],te=Hl(()=>({resource:n,cost(){let H=new f(this.amount.value);return H.gte(25)&&(H=H.pow(2).div(25)),f.pow(2,H.pow(1.5)).floor()},display(){return{title:"Exhancers",description:`Adds ${se(He.value)} things and multiplies stuff by ${se(en.value)}.`}},onPurchase(H){s.value=f.add(s.value,H!=null?H:0)},style:{height:"222px"},purchaseLimit:4})),He=N(()=>f.gte(te.amount.value,0)?f.pow(25,f.pow(te.amount.value,1.1)):f.pow(1/25,f.times(te.amount.value,-1).pow(1.1))),en=N(()=>f.gte(te.amount.value,0)?f.pow(25,f.pow(te.amount.value,1.1)):f.pow(1/25,f.times(te.amount.value,-1).pow(1.1))),at=ue(!1),ot=O(!1),Ot=$t(()=>({small:!0,display:"Respec Thingies",onClick(){if(at.value&&!ot.value){ot.value=!0;return}n.value=f.add(n.value,s.value),te.amount.value=0,Y.tree.reset(Xe)}})),Sn=$t(()=>({small:!0,display:"Sell One",onClick(){f.lte(te.amount.value,0)||(te.amount.value=f.sub(te.amount.value,1),n.value=f.add(n.value,te.cost.value),s.value=f.sub(s.value,te.cost.value))}})),Ei=L(()=>d(Lt,null,{default:()=>[d(bt,null,{default:()=>[d(we,{title:"Confirm","onUpdate:modelValue":H=>at.value=H,modelValue:at.value},null),Pe(Ot)]}),Pe(te),Pe(Sn),d(Je,{modelValue:ot.value,"onUpdate:modelValue":H=>ot.value=H},{header:()=>d("h2",null,[C("Confirm Respec")]),body:()=>d(K,null,[C("Are you sure? Respeccing these doesn't accomplish much")]),footer:()=>d("div",{class:"modal-default-footer"},[d("div",{class:"modal-default-flex-grow"},null),d("button",{class:"button modal-default-button",onClick:()=>ot.value=!1},[C("Cancel")]),d("button",{class:"button modal-default-button danger",onClick:()=>{Ot.onClick(),ot.value=!1}},[C("Respec")])])})]})),Cn=an(()=>({fillStyle:{backgroundColor:"#FFFFFF"},baseStyle:{backgroundColor:"#696969"},textStyle:{color:"#04e050"},direction:X.Right,width:300,height:30,progress(){return f.add(Y.points.value,1).log(10).div(10).toNumber()},display(){return se(Y.points.value)+" / 1e10 points"}})),$n=an(()=>({fillStyle:{backgroundColor:"#4BEC13"},baseStyle:{backgroundColor:"#000000"},textStyle:{textShadow:"0px 0px 2px #000000"},borderStyle:{borderWidth:"7px"},direction:X.Up,width:50,height:200,progress(){return f.div(Y.points.value,100)},display(){return ve(f.div(Y.points.value,1).min(100))+"%"}})),At=an(()=>({fillStyle:{backgroundColor:"#FE0102"},baseStyle:{backgroundColor:"#222222"},textStyle:{textShadow:"0px 0px 2px #000000"},direction:X.Up,width:100,height:30,progress(){return f.div(n.value,50)}})),pt=ll(()=>({scaling:cl($i(10,.5),1e100,.5),baseResource:Y.points,gainResource:n,roundUpCost:!0,gainModifier:Ol(Pl(()=>({exponent:2,description:"Because I felt like it"})),Tl(()=>({addend:1,description:"Nice modifier"})))})),Mn=Ti(()=>({thingsToReset:()=>[Oe]})),Vi=[Ln(()=>({key:"c",description:"reset for lollipops or whatever",onPress(){mt.canClick.value&&mt.onClick()}})),Ln(()=>({key:"ctrl+c",description:"respec things",onPress(){Ot.onClick()}}))],Xe=Si(()=>({layerID:on,color:e,reset:Mn,mark:"https://unsoftcapped2.github.io/The-Modding-Tree-2/discord.png",tooltip(){let H=je(n);return f.gt(te.amount.value,0)&&(H+=`<br><i><br><br><br>${ve(te.amount.value)} Exhancers</i>`),H},style:{color:"#3325CC",textDecoration:"underline"}}));un(Xe,{display:wi(n),pinnable:!0});const mt=Ni(()=>({conversion:pt,tree:Y.tree,treeNode:Xe,style:{color:"#AA66AA"},resetDescription:"Melt your points into "}));un(mt,{display:L(()=>Al("Modifiers","",pt.gainModifier,pt.scaling.currentGain(pt))),pinnable:!0,direction:X.Down,style:"width: 400px; text-align: left"});const Et=yt(()=>({display:"TH",color:"#6d3678",canClick(){return f.gte(Y.points.value,10)},tooltip:"Thanos your points",onClick(){Y.points.value=f.div(Y.points.value,2),console.log("Thanos'd")},glowColor(){return f.eq(te.amount.value,1)?"orange":""}})),Vt=yt(()=>({display:"h",color(){return ze[Z.theme].variables["--locked"]},tooltip:{display:N(()=>`Restore your points to ${se(o.value)}`),right:!0},canClick(){return f.lt(Y.points.value,o.value)},onClick(){Y.points.value=o.value}})),Tn=yt(()=>({visibility:B.Hidden})),In=ki(()=>({nodes(){return[[Fe.treeNode,Xe],[Et,Tn,Vt]]},branches(){return[{startNode:Fe.treeNode,endNode:Xe,"stroke-width":"25px",stroke:"green",style:{filter:"blur(5px)"}},{startNode:Xe,endNode:Et},{startNode:Et,endNode:Vt}]}})),Fi=eu(()=>({links:[{startNode:Vt,endNode:At,"stroke-width":"5px",stroke:"red",offsetEnd:{x:-50+100*At.progress.value.toNumber(),y:0}}]})),Di=zn({first:()=>({tab:L(()=>d(K,null,[Pe(...be),Pe(G),d("div",null,[C("confirmed")])])),display:"first"}),second:()=>({tab:Fe.display,display:"second"})},()=>({style:{width:"660px",backgroundColor:"brown","--background":"brown",border:"solid white",marginLeft:"auto",marginRight:"auto"}})),Pn=zn({mainTab:()=>({tab:Rt(()=>({display:L(()=>{let H;return d(K,null,[d(Pi,{resource:n,color:e,effectDisplay:`which are boosting waffles by ${se(u.value)} and increasing the Ice Cream cap by ${se(c.value)}`},null),d(Wt,null,ku(H=oe(mt))?H:{default:()=>[H]}),d(Ii,{resource:n,color:e},null),d(ye,{height:"5px"},null),d("button",{onClick:()=>console.log("yeet")},[C("'HI'")]),d("div",null,[C("Name your points!")]),d(_n,{modelValue:a.value,"onUpdate:modelValue":On=>a.value=On},null),d(Wt,{style:"color: red; font-size: 32px; font-family: Comic Sans MS;"},{default:()=>[C("I have "),je(Y.points),C(" "),a.value,C(" points!")]}),d("hr",null,null),ra(...w),d(ye,null,null),Pe(...be),Pe(G),Pe(S)])})})),display:"main tab",glowColor(){return R.canPurchase.value||ke.canPurchase.value||I.canPurchase.value||S.canComplete.value?"blue":""},style:{color:"orange"}}),thingies:()=>({tab:Rt(()=>({style(){return{backgroundColor:"#222222","--background":"#222222"}},display:L(()=>d(K,null,[oe(Ei),d(ye,null,null),d(bt,{style:"width: 600px; height: 350px; background-color: green; border-style: solid;"},{default:()=>[d(we,{"onUpdate:modelValue":H=>r.value=H,modelValue:r.value},null),d(ye,{width:"30px",height:"10px"},null),d("div",null,[d("span",null,[C("Beep")])]),d(ye,null,null),d(ql,{height:"200px"},null)]}),d(ye,null,null),d("img",{src:"https://unsoftcapped2.github.io/The-Modding-Tree-2/discord.png"},null)]))})),glowColor:"white",display:"thingies",style:{borderColor:"orange"}}),jail:()=>({tab:Rt(()=>({display:L(()=>d(K,null,[oe(h),oe(Cn),d(ye,null,null),d(bt,null,{default:()=>[d(Lt,{style:"background-color: #555555; padding: 15px"},{default:()=>[d("div",{style:"color: teal"},[C("Sugar level:")]),d(ye,null,null),oe($n)]}),d(ye,null,null),d(Lt,null,{default:()=>[d("div",null,[C("idk")]),d(ye,{width:"0",height:"50px"},null),oe(At)]})]}),d(ye,null,null),d("div",null,[C(`It's jail because "bars"! So funny! Ha ha!`)]),oe(In)]))})),display:"jail"}),illuminati:()=>({tab:Rt(()=>({display:L(()=>d("div",null,[d("h1",null,[C(" C O N F I R M E D ")]),d(ye,null,null),oe(Di),d("div",null,[C("Adjust how many points H gives you!")]),d(Rl,{"onUpdate:modelValue":H=>o.value=H,modelValue:o.value,min:1,max:30},null)])),style:{backgroundColor:"#3325CC"}})),visibility(){return gt(I.bought.value)},display:"illuminati"})});return{id:on,color:e,name:t,points:n,best:i,beep:r,thingy:a,otherThingy:o,spentOnBuyables:s,waffleBoost:u,icecreamCap:c,coolInfo:h,lollipopMilestones:w,funChallenge:S,funEffect:$,generatorUpgrade:R,lollipopMultiplierUpgrade:ke,lollipopMultiplierEffect:M,unlockIlluminatiUpgrade:I,quasiUpgrade:G,exhancers:te,respecBuyables:Ot,sellExhancer:Sn,bars:{tallBoi:$n,longBoi:Cn,flatBoi:At},tree:In,g:Et,h:Vt,spook:Tn,conversion:pt,reset:Mn,hotkeys:Vi,treeNode:Xe,resetButton:mt,confirmRespec:at,minWidth:800,tabs:Pn,display:L(()=>d(K,null,[oe(Pn),oe(Fi)]))}}),wu={min:.5,max:1},xu=[{s:0,cp:.329,e:.548},{s:.548,cp:.767,e:.876},{s:.876,cp:.985,e:1}],Nu=.001,Su=.1,Cu=100,$u=!0,Mu={x:0,y:0},Tu=!1,Iu=[{type:"alpha",config:{alpha:{list:[{time:0,value:.74},{time:1,value:0}]}}},{type:"moveSpeed",config:{speed:{list:[{time:0,value:300},{time:1,value:0}]},minMult:1}},{type:"scale",config:{scale:{list:[{time:0,value:1},{time:1,value:.25}]},minMult:1}},{type:"color",config:{color:{list:[{time:0,value:"#ffdfa0"},{time:1,value:"#100f0c"}]}}},{type:"rotation",config:{accel:0,minSpeed:0,maxSpeed:200,minStart:0,maxStart:360}},{type:"textureRandom",config:{textures:["/particle.png"]}},{type:"spawnShape",config:{type:"rect",data:{x:0,y:0,w:0,h:0}}}];var Pu={lifetime:wu,ease:xu,frequency:Nu,emitterLifetime:Su,maxParticles:Cu,addAtBack:$u,pos:Mu,emit:Tu,behaviors:Iu};const sn="f",Fe=It(sn,()=>{const e="#FE0102",t="Farms",n=Ct(0,"farm points"),i=ue(!1),r=Mi(()=>({title:"Lore",titleStyle:{color:"#FE0000"},display:"DEEP LORE!",bodyStyle:{backgroundColor:"#0000EE"}})),a=ue("Start"),o=$t(()=>({display(){return{title:"Clicky clicky!",description:"Current state:<br>"+a.value}},initialState:"Start",canClick(){return a.value!=="Borkened..."},onClick(S){var $,R,ke,M,I,G,be,te;switch(a.value){case"Start":a.value="A new state!";break;case"A new state!":a.value="Keep going!";break;case"Keep going!":a.value="Maybe that's a bit too far...";break;case"Maybe that's a bit too far...":const He=S==null?void 0:"touches"in S?S.touches[0]:S,en=Object.assign({},Pu,{pos:{x:(($=He==null?void 0:He.clientX)!=null?$:0)-((M=(ke=(R=b.boundingRect)==null?void 0:R.value)==null?void 0:ke.left)!=null?M:0),y:((I=He==null?void 0:He.clientY)!=null?I:0)-((te=(be=(G=b.boundingRect)==null?void 0:G.value)==null?void 0:be.top)!=null?te:0)}});b.addEmitter(en).then(at=>at.playOnceAndDestroy()),a.value="Borkened...";break;default:a.value="Start";break}},onHold(){console.log("Clickkkkk...")},style(){switch(a.value){case"Start":return{"background-color":"green"};case"A new state!":return{"background-color":"yellow"};case"Keep going!":return{"background-color":"orange"};case"Maybe that's a bit too far...":return{"background-color":"red"};default:return{}}}})),s=$t(()=>({onClick(){a.value=="Borkened..."&&(a.value="Start")},display(){return a.value=="Borkened..."?"Fix the clickable!":"Does nothing"},small:!0})),u=Ti(()=>({thingsToReset:()=>[Fe]})),c=ul(()=>({scaling:$i(10,.5),baseResource:Y.points,gainResource:n,modifyGainAmount:Il(()=>({multiplier:Oe.otherThingy}))})),h=Si(()=>({layerID:sn,color:e,reset:u,tooltip(){return h.canClick.value?`${je(n)} ${n.displayName}`:`This weird farmer dinosaur will only see you if you have at least 10 points. You only have ${je(Y.points)}`},canClick(){return f.gte(Y.points.value,10)}}));un(h,{display:wi(n),pinnable:!0});const v=Ni(()=>({conversion:c,tree:Y.tree,treeNode:h,display:L(()=>v.conversion.buyMax?d("span",null,[C("Hi! I'm a "),d("u",null,[C("weird dinosaur")]),C(" and I'll give you")," ",d("b",null,[ve(v.conversion.currentGain.value)]),C(" Farm Points in exchange for all of your points and lollipops! (You'll get another one at")," ",ve(v.conversion.nextAt.value),C(" points)")]):d("span",null,[C("Hi! I'm a "),d("u",null,[C("weird dinosaur")]),C(" and I'll give you a Farm Point in exchange for all of your points and lollipops! (At least")," ",ve(v.conversion.nextAt.value),C(" points)")]))})),b=wl(()=>({boundingRect:O(null),onContainerResized(S){this.boundingRect.value=S},style:"z-index: 2"})),w=L(()=>d(K,null,[oe(r),d(Pi,{resource:n,color:e},null),oe(v),d("div",null,[C("You have "),ve(c.baseResource.value),C(" points")]),d("div",null,[d("br",null,null),d("img",{src:"https://images.beano.com/store/24ab3094eb95e5373bca1ccd6f330d4406db8d1f517fc4170b32e146f80d?auto=compress%2Cformat&dpr=1&w=390"},null),d("div",null,[C("Bork Bork!")])]),d(ye,null,null),Pe(s),Pe(o),oe(b)]));return{id:sn,color:e,name:t,points:n,boop:i,coolInfo:r,clickable:o,clickableState:a,reset:u,conversion:c,treeNode:h,resetButton:v,minWidth:650,display:w}});function ln(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!cn(e)}const Un="a",dn=It(Un,()=>{const e="yellow",t="Achievements",n=Ct(0,"achievement power"),i=yt(()=>({display:"A",color:e,tooltip:{display:"Achievements",right:!0},onClick(){Y.showAchievements()}})),r=rn(()=>({image:"https://unsoftcapped2.github.io/The-Modding-Tree-2/discord.png",display:"Get me!",tooltip:N(()=>r.earned.value?"You did it!":"How did this happen?"),shouldEarn:()=>!0})),a=rn(()=>({display:"Impossible!",tooltip:N(()=>a.earned.value?"HOW????":"Mwahahaha!"),style:{color:"#04e050"}})),o=rn(()=>({display:"EIEIO",tooltip:`Get a farm point.

Reward: The dinosaur is now your friend (you can max Farm Points).`,shouldEarn:function(){return f.gte(Fe.points.value,1)},onComplete(){console.log("Bork bork bork!")}})),s=[r,a,o],u=rl(()=>({rows:2,cols:2,getStartState(h){return h},getStyle(h,v){return{backgroundColor:`#${Number(v)*1234%999999}`}},getTitle(h){let v="";return h==="101"?v="top":h==="102"?v="bottom":h==="201"?v="left":h==="202"&&(v="right"),L(()=>d(re,Be({display:JSON.stringify(this.cells[h].style)},{[v]:!0}),{default:()=>[d("h3",null,[C("Gridable #"),h])]}))},getDisplay(h,v){return String(v)},getCanClick(){return f.eq(Y.points.value,10)},onClick(h,v){this.cells[h].state=Number(v)+1}})),c=L(()=>{let h,v,b;return d(K,null,[d(bt,null,{default:()=>[d(re,{display:r.tooltip,bottom:!0},ln(h=oe(r))?h:{default:()=>[h]}),d(re,{display:a.tooltip,bottom:!0},ln(v=oe(a))?v:{default:()=>[v]}),d(re,{display:o.tooltip,bottom:!0},ln(b=oe(o))?b:{default:()=>[b]})]}),Pe(u)])});return{id:Un,color:e,name:t,points:n,achievements:s,grid:u,treeNode:i,display:c}}),Y=It("main",function(){const e=Ct(10),t=yi(e),n=ks(e),i=N(()=>{if(!Oe.generatorUpgrade.bought.value)return new f(0);let u=new f(3.19);return Oe.lollipopMultiplierUpgrade.bought.value&&(u=u.times(Oe.lollipopMultiplierEffect.value)),u});ge.on("update",u=>{e.value=f.add(e.value,f.times(i.value,u))});const r=Ns(e,i),{openModal:a,modal:o}=mi(dn),s=ki(()=>({nodes:[[Oe.treeNode],[Fe.treeNode,Oe.spook]],leftSideNodes:[dn.treeNode,Oe.h],branches:[{startNode:Fe.treeNode,endNode:Oe.treeNode,stroke:"blue","stroke-width":"25px",style:{filter:"blur(5px)"}}],onReset(){e.value=En(this.resettingNode.value)===En(Oe.treeNode)?0:10,t.value=e.value,n.value=e.value},resetPropagation:Ls}));return{name:"Tree",display:L(()=>d(K,null,[T.devSpeed===0?d("div",null,[C("Game Paused")]):null,T.devSpeed&&T.devSpeed!==1?d("div",null,[C("Dev Speed: "),se(T.devSpeed),C("x")]):null,T.offlineTime?d("div",null,[C("Offline Time: "),Jt(T.offlineTime)]):null,d("div",null,[f.lt(e.value,"1e1000")?d("span",null,[C("You have ")]):null,d("h2",null,[se(e.value)]),f.lt(e.value,"1e1e6")?d("span",null,[C(" points")]):null]),f.gt(i.value,0)?d("div",null,[C("("),r.value,C(")")]):null,d(ye,null,null),d("button",{onClick:a},[C("open achievements")]),oe(o),oe(s),d(_s,{height:"200px",style:"margin: 10px auto; display: block"},null)])),points:e,best:t,total:n,oomps:r,tree:s,showAchievements:a}}),Ou=e=>[Y,Fe,Oe,dn],Nn=N(()=>f.gt(Y.points.value,25));function Au(e,t){}var Ai=Object.freeze(Object.defineProperty({__proto__:null,main:Y,getInitialLayers:Ou,hasWon:Nn,fixOldSave:Au},Symbol.toStringTag,{value:"Module"}));const Pt=e=>(qe("data-v-4a50ce42"),e=e(),Le(),e),Eu={class:"game-over-modal-header"},Vu=["src","alt"],Fu={class:"game-over-modal-title"},Du=Pt(()=>p("h2",null,"Congratulations!",-1)),Ru={key:0},Bu=Pt(()=>p("br",null,null,-1)),qu=Pt(()=>p("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),Lu=Pt(()=>p("br",null,null,-1)),ju=["href"],zu=Pt(()=>p("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),Uu=E({__name:"GameOverScreen",setup(e){const{title:t,logo:n,discordName:i,discordLink:r,versionNumber:a,versionTitle:o}=J,s=N(()=>Jt(T.timePlayed)),u=N(()=>Nn.value&&!T.keepGoing),c=Ze(T,"autosave");function h(){T.keepGoing=!0}function v(){nt(ut())}return(b,w)=>(g(),A(Je,{"model-value":l(u)},{header:V(()=>[p("div",Eu,[l(n)?(g(),x("img",{key:0,class:"game-over-modal-logo",src:l(n),alt:l(t)},null,8,Vu)):P("",!0),p("div",Fu,[Du,p("h4",null,"You've beaten "+U(l(t))+" v"+U(l(a))+": "+U(l(o)),1)])])]),body:V(({shown:S})=>[S?(g(),x("div",Ru,[p("div",null,"It took you "+U(l(s))+" to beat the game.",1),Bu,qu,Lu,p("div",null,[p("a",{href:l(r),class:"game-over-modal-discord-link"},[zu,C(" "+U(l(i)),1)],8,ju)]),d(we,{title:"Autosave",modelValue:l(c),"onUpdate:modelValue":w[0]||(w[0]=$=>pe(c)?c.value=$:null)},null,8,["modelValue"])])):P("",!0)]),footer:V(()=>[p("div",{class:"game-over-footer"},[p("button",{onClick:h,class:"button"},"Keep Going"),p("button",{onClick:v,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}});var Gu=q(Uu,[["__scopeId","data-v-4a50ce42"]]);const Qt=e=>(qe("data-v-3de07c06"),e=e(),Le(),e),Hu=Qt(()=>p("div",{class:"nan-modal-header"},[p("h2",null,"NaN value detected!")],-1)),Wu={key:0},Yu=Qt(()=>p("br",null,null,-1)),Ku=["href"],Zu=Qt(()=>p("span",{class:"material-icons nan-modal-discord"},"discord",-1)),Ju=Qt(()=>p("br",null,null,-1)),Xu={class:"nan-footer"},Qu=E({__name:"NaNScreen",setup(e){const{discordName:t,discordLink:n}=J,i=Ze(T,"autosave"),r=Ze(ie,"hasNaN"),a=O(null),o=N(()=>{var w;return(w=ie.NaNPath)==null?void 0:w.join(".")}),s=N(()=>{var w;return(w=ie.NaNPath)==null?void 0:w.slice(-1)[0]}),u=N(()=>ie.NaNReceiver&&s.value?ie.NaNReceiver[s.value]:null),c=N({get(){return T.devSpeed===0},set(w){T.devSpeed=w?null:0}});function h(){ie.NaNReceiver&&s.value&&(ie.NaNReceiver[s.value]=new f(0),ie.hasNaN=!1)}function v(){ie.NaNReceiver&&s.value&&(ie.NaNReceiver[s.value]=new f(1),ie.hasNaN=!1)}function b(){ie.NaNReceiver&&s.value&&(ie.NaNReceiver[s.value]=new f(NaN),ie.hasNaN=!1)}return(w,S)=>(g(),x(K,null,[d(Je,Be({modelValue:l(r),"onUpdate:modelValue":S[4]||(S[4]=$=>pe(r)?r.value=$:null)},w.$attrs),{header:V(()=>[Hu]),body:V(()=>[p("div",null,[C(' Attempted to assign "'+U(l(o))+'" to NaN',1),l(u)?(g(),x("span",Wu,U(" ")+"(previously "+U(l(se)(l(u)))+")",1)):P("",!0),C(". Auto-saving has been "+U(l(i)?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),Yu,p("div",null,[p("a",{href:l(n),class:"nan-modal-discord-link"},[Zu,C(" "+U(l(t)),1)],8,Ku)]),Ju,d(we,{title:"Autosave",modelValue:l(i),"onUpdate:modelValue":S[0]||(S[0]=$=>pe(i)?i.value=$:null)},null,8,["modelValue"]),l(J).enablePausing?(g(),A(we,{key:0,title:"Pause game",modelValue:l(c),"onUpdate:modelValue":S[1]||(S[1]=$=>pe(c)?c.value=$:null)},null,8,["modelValue"])):P("",!0)]),footer:V(()=>[p("div",Xu,[p("button",{onClick:S[2]||(S[2]=$=>{var R;return(R=a.value)==null?void 0:R.open()}),class:"button"},"Open Saves Manager"),p("button",{onClick:h,class:"button"},"Set to 0"),p("button",{onClick:v,class:"button"},"Set to 1"),l(u)&&l(f).neq(l(u),0)&&l(f).neq(l(u),1)?(g(),x("button",{key:0,onClick:S[3]||(S[3]=$=>r.value=!1),class:"button"}," Set to previous ")):P("",!0),p("button",{onClick:b,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),d(hi,{ref_key:"savesManager",ref:a},null,512)],64))}});var ed=q(Qu,[["__scopeId","data-v-3de07c06"]]);const td={key:0,class:"tpsDisplay"},nd={key:0,class:"low"},id=E({__name:"TPS",setup(e){const t=N(()=>f.div(ie.lastTenTicks.length,ie.lastTenTicks.reduce((a,o)=>a+o,0))),n=O([]);Ne(()=>{n.value.push(Math.round(t.value.toNumber())),n.value.length>10&&(n.value=n.value.slice(1))});const i=N(()=>n.value.reduce((a,o)=>f.max(a,o),0)),r=N(()=>f.sub(t.value,i.value).gt(1));return(a,o)=>l(t).isNan()?P("",!0):(g(),x("div",td,[C(" TPS: "+U(l(ve)(l(t)))+" ",1),d(Zt,{name:"fade"},{default:V(()=>[l(r)?(g(),x("span",nd,U(l(ve)(l(i))),1)):P("",!0)]),_:1})]))}});var rd=q(id,[["__scopeId","data-v-46a3ed5b"]]);var ad=E({__name:"App",setup(e){const t=J.useHeader,n=N(()=>ze[Z.theme].variables),i=Ze(Z,"showTPS"),r=N(()=>D(L(()=>d(K,null,[ta.map(oe)]))));return(a,o)=>(g(),x(K,null,[p("div",{id:"modal-root",style:W(l(n))},null,4),p("div",{class:Q(["app",{useHeader:l(t)}]),style:W(l(n))},[l(t)?(g(),A(bi,{key:0})):P("",!0),d(gs),l(l(i))?(g(),A(rd,{key:1})):P("",!0),d(Gu),d(ed),(g(),A(ee(l(r))))],6)],64))}});var od=q(ad,[["__scopeId","data-v-9417972e"]]);function sd(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisterError:a}=e;let o,s;const u=async(c=!0)=>{c&&(o==null||o.addEventListener("controlling",h=>{h.isUpdate&&window.location.reload()})),s&&s.waiting&&await er(s.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){o=new Qi("./sw.js",{scope:"./",type:"classic"}),o.addEventListener("activated",c=>{c.isUpdate||i==null||i()});{const c=()=>{n==null||n()};o.addEventListener("waiting",c),o.addEventListener("externalwaiting",c)}o.register({immediate:t}).then(c=>{s=c,r==null||r(c)}).catch(c=>{a==null||a(c)})}return u}function ld(e={}){const{immediate:t=!0,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisterError:a}=e,o=O(!1),s=O(!1);return{updateServiceWorker:sd({immediate:t,onNeedRefresh(){o.value=!0,n==null||n()},onOfflineReady(){s.value=!0,i==null||i()},onRegistered:r,onRegisterError:a}),offlineReady:s,needRefresh:o}}document.title=J.title;window.projInfo=J;if(J.id==="")throw"Project ID is empty! Please select a unique ID for this project in /src/data/projInfo.json";requestAnimationFrame(async()=>{console.log(`%cMade in Profectus%c
Learn more at www.moddingtree.com`,"font-weight: bold; font-size: 24px; color: #A3BE8C; background: #2E3440; padding: 4px 8px; border-radius: 8px;","padding: 4px;"),await Jr();const{globalBus:e,startGameLoop:t}=await zt(()=>Promise.resolve().then(function(){return Zr}),void 0),n=window.vue=Ui(od);e.emit("setupVue",n),n.mount("#app"),Ve(()=>{const i=fn(),{updateServiceWorker:r}=ld({onNeedRefresh(){i.info("New content available, click or reload to update.",{timeout:!1,closeOnClick:!1,draggable:!1,icon:{iconClass:"material-icons",iconChildren:"refresh",iconTag:"i"},rtl:!1,onClick(){r()}})},onOfflineReady(){i.info("App ready to work offline")},onRegisterError:console.warn,onRegistered(a){a&&setInterval(a.update,60*60*1e3)}})}),t()});
